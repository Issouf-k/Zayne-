const a4_0x33baf6=a4_0x22a7;(function(_0x22be2c,_0x4c2995){const _0xb50a35=a4_0x22a7,_0x153e22=_0x22be2c();while(!![]){try{const _0x2135c4=-parseInt(_0xb50a35(0xfe))/0x1*(parseInt(_0xb50a35(0xff))/0x2)+-parseInt(_0xb50a35(0xd2))/0x3+parseInt(_0xb50a35(0x110))/0x4*(-parseInt(_0xb50a35(0xf7))/0x5)+parseInt(_0xb50a35(0xd8))/0x6*(-parseInt(_0xb50a35(0x113))/0x7)+parseInt(_0xb50a35(0xf5))/0x8*(parseInt(_0xb50a35(0xda))/0x9)+-parseInt(_0xb50a35(0xdc))/0xa+parseInt(_0xb50a35(0xea))/0xb*(parseInt(_0xb50a35(0x111))/0xc);if(_0x2135c4===_0x4c2995)break;else _0x153e22['push'](_0x153e22['shift']());}catch(_0x3ab6f4){_0x153e22['push'](_0x153e22['shift']());}}}(a4_0x5c84,0x6fb25));import a4_0xdb771d from'fs/promises';import a4_0x5ecca5 from'path';import{fileURLToPath}from'url';import{delete_message,send_text_message,send_reaction_message}from'../utils/sendmessagewa.js';function a4_0x5c84(){const _0x3698d2=['expulser','▸\x20Whitelist:\x20','parse','join','83184SNIVfH','>\x20⛓\x20AntiLink\x20activé\x0a','54cBIxmo','json/antilink.json','804900SfkFHX','stringify','split','toLowerCase','supprimerMessage','>\x20⚠️\x20Admin\x20requis','avertir','remove','endsWith','>\x20⚠️\x20@','extendedTextMessage','code','readFile','>\x20❌\x20@','341GQWRmY','dirname','whitelist','lastAttempt','message','tentatives','map','filter',',\x20liens\x20interdits\x20détectés\x20!\x20(','[AntiLink]\x20Erreur\x20chargement\x20config:','imageMessage','685768CdmTbj','protocolMessage','482060fuwSul','groupesActives','ENOENT','catch','>\x20⚠️\x20Commande\x20réservée\x20aux\x20groupes','some','writeFile','676160KZtLuk','2XJYtyP','push','[AntiLink]\x20Erreur\x20sauvegarde\x20config:','▸\x20Suppression:\x20','includes','text','▸\x20Avertissement:\x20','key','error','parametresGlobaux','access','caption','count','length','mkdir','match','maxTentatives','24unkAUs','966312EZsnmL','participant','168BCEHCP','Admin\x20détecté\x20-\x20Ignoré','>\x20⛓\x20AntiLink\x20désactivé','>\x20ℹ️\x20\x22','videoMessage','conversation','@g.us','Aucune','utf-8','2655795RzUwFz','>\x20ℹ️\x20Non\x20activé'];a4_0x5c84=function(){return _0x3698d2;};return a4_0x5c84();}import{isAdmin}from'../utils/gestion_groupe.js';import{log}from'console';const __dirname=a4_0x5ecca5[a4_0x33baf6(0xeb)](fileURLToPath(import.meta['url'])),ANTILINK_FILE=a4_0x5ecca5['join'](__dirname,a4_0x33baf6(0xdb)),defaultConfig={'groupesActives':{},'parametresGlobaux':{'supprimerMessage':!![],'avertir':!![],'expulser':!![],'maxTentatives':0x3},'whitelist':[],'tentatives':{}};let config={...defaultConfig};async function chargerConfig(){const _0x61980c=a4_0x33baf6;try{await a4_0xdb771d[_0x61980c(0x10d)](a4_0x5ecca5['dirname'](ANTILINK_FILE),{'recursive':!![]}),await a4_0xdb771d[_0x61980c(0x109)](ANTILINK_FILE);const _0x3e0f44=await a4_0xdb771d[_0x61980c(0xe8)](ANTILINK_FILE,_0x61980c(0xd1)),_0x1d3481=JSON[_0x61980c(0xd6)](_0x3e0f44),_0x4774d5=Date['now']();for(const _0x2af069 in _0x1d3481[_0x61980c(0xef)]){_0x4774d5-_0x1d3481[_0x61980c(0xef)][_0x2af069][_0x61980c(0xed)]>0x5265c00&&delete _0x1d3481[_0x61980c(0xef)][_0x2af069];}return{...defaultConfig,..._0x1d3481};}catch(_0x539dca){return _0x539dca[_0x61980c(0xe7)]!==_0x61980c(0xf9)&&console[_0x61980c(0x107)](_0x61980c(0xf3),_0x539dca),{...defaultConfig};}}function a4_0x22a7(_0x37f7d3,_0x4ac59c){const _0x5c842b=a4_0x5c84();return a4_0x22a7=function(_0x22a71a,_0xf19a34){_0x22a71a=_0x22a71a-0xcd;let _0x21c707=_0x5c842b[_0x22a71a];return _0x21c707;},a4_0x22a7(_0x37f7d3,_0x4ac59c);}async function sauvegarderConfig(){const _0x3c3008=a4_0x33baf6;try{await a4_0xdb771d[_0x3c3008(0xfd)](ANTILINK_FILE,JSON[_0x3c3008(0xdd)](config,null,0x2),_0x3c3008(0xd1));}catch(_0x491cb6){console[_0x3c3008(0x107)](_0x3c3008(0x101),_0x491cb6);}}((async()=>{config=await chargerConfig();})());async function enregistrerTentative(_0x3665a8,_0x1af647){const _0x3455ca=a4_0x33baf6,_0x48b080=_0x3665a8+':'+_0x1af647,_0x13776e=Date['now']();return config[_0x3455ca(0xef)][_0x48b080]={'count':(config['tentatives'][_0x48b080]?.[_0x3455ca(0x10b)]||0x0)+0x1,'lastAttempt':_0x13776e},await sauvegarderConfig(),config[_0x3455ca(0xef)][_0x48b080][_0x3455ca(0x10b)];}async function resetTentatives(_0x56dfef,_0x5822a7){const _0xc60421=a4_0x33baf6,_0x26b5a5=_0x56dfef+':'+_0x5822a7;config[_0xc60421(0xef)][_0x26b5a5]&&(delete config[_0xc60421(0xef)][_0x26b5a5],await sauvegarderConfig());}function detecterLiens(_0x5ab3e6){const _0x44a3de=a4_0x33baf6,_0x4dcff8=/(https?:\/\/|www\.)[^\s]+[\w]/gi;return _0x5ab3e6?.[_0x44a3de(0x10e)](_0x4dcff8)||[];}function filtrerLiensInterdits(_0x3f79f4,_0x210989){const _0x2887d5=a4_0x33baf6;return _0x3f79f4[_0x2887d5(0xf1)](_0x5c6719=>!_0x210989[_0x2887d5(0xfc)](_0x345986=>_0x5c6719[_0x2887d5(0xdf)]()[_0x2887d5(0x103)](_0x345986[_0x2887d5(0xdf)]())));}export function creerAntiLinkBaileys(_0x381ae4,_0x44509a,_0x107593){return async()=>{const _0x1c9d43=a4_0x22a7;try{if(!_0x44509a[_0x1c9d43(0xee)]||!_0x107593[_0x1c9d43(0xe4)](_0x1c9d43(0xcf)))return;if(_0x44509a[_0x1c9d43(0xee)][_0x1c9d43(0xf6)]||_0x44509a[_0x1c9d43(0xee)]['reactionMessage'])return;const _0xcb9186=config[_0x1c9d43(0xf8)][_0x107593];if(!_0xcb9186)return;const _0x9183a9=_0x44509a[_0x1c9d43(0x106)][_0x1c9d43(0x112)];if(!_0x9183a9||await isAdmin(_0x381ae4,_0x107593,_0x9183a9))return log(_0x1c9d43(0x114),{'senderId':_0x9183a9});const _0x2c8280=_0x44509a[_0x1c9d43(0xee)][_0x1c9d43(0xce)]||_0x44509a[_0x1c9d43(0xee)][_0x1c9d43(0xe6)]?.[_0x1c9d43(0x104)]||_0x44509a[_0x1c9d43(0xee)][_0x1c9d43(0xf4)]?.[_0x1c9d43(0x10a)]||_0x44509a[_0x1c9d43(0xee)][_0x1c9d43(0xcd)]?.[_0x1c9d43(0x10a)]||_0x44509a['message']['documentMessage']?.[_0x1c9d43(0x10a)],_0x31be1b=detecterLiens(_0x2c8280);if(_0x31be1b[_0x1c9d43(0x10c)]===0x0)return;const _0x352f3c=[...config[_0x1c9d43(0xec)],..._0xcb9186[_0x1c9d43(0xec)]||[]],_0x2eeac2=filtrerLiensInterdits(_0x31be1b,_0x352f3c);if(_0x2eeac2[_0x1c9d43(0x10c)]===0x0)return;const _0x385fa0=_0x9183a9[_0x1c9d43(0xde)]('@')[0x0],_0x5ba22f=await enregistrerTentative(_0x107593,_0x9183a9);_0xcb9186[_0x1c9d43(0xe0)]!==![]&&setTimeout(()=>delete_message(_0x381ae4,_0x44509a,_0x107593,_0x44509a[_0x1c9d43(0x106)])[_0x1c9d43(0xfa)](()=>{}),0x3e8),_0xcb9186[_0x1c9d43(0xe2)]!==![]&&await send_text_message(_0x381ae4,_0x44509a,_0x1c9d43(0xe5)+_0x385fa0+_0x1c9d43(0xf2)+_0x5ba22f+'/'+(_0xcb9186[_0x1c9d43(0x10f)]||0x3)+')',_0x107593,[_0x9183a9],![],!![],![]),_0x5ba22f>=(_0xcb9186['maxTentatives']||0x3)&&_0xcb9186[_0x1c9d43(0xd4)]&&(await _0x381ae4['groupParticipantsUpdate'](_0x107593,[_0x9183a9],_0x1c9d43(0xe3))[_0x1c9d43(0xfa)](()=>{}),await send_text_message(_0x381ae4,_0x44509a,_0x1c9d43(0xe9)+_0x385fa0+'\x20expulsé\x20pour\x20liens\x20interdits',_0x107593,[_0x9183a9],![],!![],![]),await resetTentatives(_0x107593,_0x9183a9));}catch(_0x592cf9){console['error']('[AntiLink]\x20Erreur:',_0x592cf9);}};}export async function ajouterGroupeAntilink(_0x128c3f,_0x12a325,_0x56d907,_0xd9f9ef){const _0x5570a6=a4_0x33baf6;if(!_0xd9f9ef)return await send_reaction_message(_0x128c3f,_0x12a325,_0x56d907,'❌'),await send_text_message(_0x128c3f,_0x12a325,_0x5570a6(0xfb),_0x56d907),![];const _0x3b20ff=_0x12a325[_0x5570a6(0x106)]['participant'];if(!await isAdmin(_0x128c3f,_0x56d907,_0x3b20ff))return await send_reaction_message(_0x128c3f,_0x12a325,_0x56d907,'❌'),await send_text_message(_0x128c3f,_0x12a325,_0x5570a6(0xe1),_0x56d907),![];return!config[_0x5570a6(0xf8)][_0x56d907]?(config[_0x5570a6(0xf8)][_0x56d907]={...config[_0x5570a6(0x108)]},await sauvegarderConfig(),await send_reaction_message(_0x128c3f,_0x12a325,_0x56d907,'✅'),await send_text_message(_0x128c3f,_0x12a325,_0x5570a6(0xd9)+(_0x5570a6(0x102)+(config['parametresGlobaux'][_0x5570a6(0xe0)]?'✅':'❌')+'\x0a')+(_0x5570a6(0x105)+(config['parametresGlobaux'][_0x5570a6(0xe2)]?'✅':'❌')+'\x0a')+('▸\x20Expulsion:\x20'+(config['parametresGlobaux']['expulser']?'✅':'❌')+'\x0a')+(_0x5570a6(0xd5)+(config[_0x5570a6(0xec)][_0x5570a6(0x10c)]>0x0?config[_0x5570a6(0xec)][_0x5570a6(0xd7)](',\x20'):_0x5570a6(0xd0))),_0x56d907),!![]):(await send_reaction_message(_0x128c3f,_0x12a325,_0x56d907,'ℹ️'),await send_text_message(_0x128c3f,_0x12a325,'>\x20ℹ️\x20Déjà\x20activé',_0x56d907),![]);}export async function supprimerGroupeAntilink(_0x35de5b,_0xe26843,_0x50cc70,_0x42c01f){const _0x463e01=a4_0x33baf6;if(!_0x42c01f)return await send_reaction_message(_0x35de5b,_0xe26843,_0x50cc70,'❌'),await send_text_message(_0x35de5b,_0xe26843,_0x463e01(0xfb),_0x50cc70),![];const _0x25dd5c=_0xe26843['key'][_0x463e01(0x112)];if(config[_0x463e01(0xf8)][_0x50cc70])return delete config['groupesActives'][_0x50cc70],await sauvegarderConfig(),await send_reaction_message(_0x35de5b,_0xe26843,_0x50cc70,'✅'),await send_text_message(_0x35de5b,_0xe26843,_0x463e01(0x115),_0x50cc70),!![];return await send_reaction_message(_0x35de5b,_0xe26843,_0x50cc70,'ℹ️'),await send_text_message(_0x35de5b,_0xe26843,_0x463e01(0xd3),_0x50cc70),![];}export async function listerGroupesAntilink(){const _0x4ce366=a4_0x33baf6;return Object['keys'](config['groupesActives'])[_0x4ce366(0xf0)](_0x1d2d9c=>_0x1d2d9c[_0x4ce366(0xde)]('@')[0x0])[_0x4ce366(0xd7)]('\x0a')||'Aucun\x20groupe';}export async function whitelistAntilink(_0x21f333,_0x53ea16,_0x5b9892,_0x4dc33c){const _0x38865f=a4_0x33baf6;if(!config[_0x38865f(0xec)][_0x38865f(0x103)](_0x4dc33c))return config[_0x38865f(0xec)][_0x38865f(0x100)](_0x4dc33c),await sauvegarderConfig(),await send_reaction_message(_0x21f333,_0x53ea16,_0x5b9892,'✅'),await send_text_message(_0x21f333,_0x53ea16,'>\x20✅\x20\x22'+_0x4dc33c+'\x22\x20whitelisté',_0x5b9892),!![];return await send_reaction_message(_0x21f333,_0x53ea16,_0x5b9892,'ℹ️'),await send_text_message(_0x21f333,_0x53ea16,_0x38865f(0x116)+_0x4dc33c+'\x22\x20déjà\x20autorisé',_0x5b9892),![];}