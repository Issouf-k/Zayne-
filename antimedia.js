const a5_0x4341d3=a5_0x4d46;(function(_0x14ac95,_0x558c74){const _0x2ae847=a5_0x4d46,_0x5f3caa=_0x14ac95();while(!![]){try{const _0x36c9f0=parseInt(_0x2ae847(0x125))/0x1*(-parseInt(_0x2ae847(0x14d))/0x2)+-parseInt(_0x2ae847(0x123))/0x3*(parseInt(_0x2ae847(0x139))/0x4)+-parseInt(_0x2ae847(0x12b))/0x5+-parseInt(_0x2ae847(0x131))/0x6*(parseInt(_0x2ae847(0x161))/0x7)+parseInt(_0x2ae847(0x11a))/0x8+-parseInt(_0x2ae847(0x151))/0x9*(-parseInt(_0x2ae847(0x129))/0xa)+parseInt(_0x2ae847(0x11f))/0xb*(parseInt(_0x2ae847(0x14a))/0xc);if(_0x36c9f0===_0x558c74)break;else _0x5f3caa['push'](_0x5f3caa['shift']());}catch(_0x5f03aa){_0x5f3caa['push'](_0x5f3caa['shift']());}}}(a5_0x3aee,0xafac9));import a5_0x16a4d1 from'fs/promises';function a5_0x3aee(){const _0x4ea448=['endsWith','lastAttempt','audio','catch','@g.us','groupes\x20actifs.','reactionMessage','length','key','access','image','‚ñ∏\x20Expulsion\x20apr√®s:\x20','2373PJHkgA','>\x20‚ÑπÔ∏è\x20D√©j√†\x20activ√©','join','log','url','remove','7497088SdePsT','document','parametresGlobaux','writeFile','[AntiMedia]\x20Erreur\x20sauvegarde\x20config:','847KuJWKc','message','protocolMessage','now','4332pdHPbY','\x20interdit\x20!\x20(','1awAmON','[AntiMedia]\x20Erreur:','maxTentatives','groupesActives','2091870pvWcwa','\x20expuls√©\x20pour\x20m√©dias\x20interdits.','1140895ChJhnV','readFile','json/antimedia-config.json','utf-8','includes','viewOnceMessage','1818ZqCPNf','error','function','typesBloques','add','‚ñ∏\x20Avertissement:\x20','avertir','mkdir','84BwvwsS','>\x20üñº\x20Whitelist\x20','video','>\x20‚ö†Ô∏è\x20@','supprimerMedia','participant','[AntiMedia]\x20Module\x20pr√™t\x20avec','>\x20‚ÑπÔ∏è\x20Non\x20activ√©','tentatives','split','groupParticipantsUpdate','>\x20üñº\x20Param√®tre\x20mis\x20√†\x20jour\x0a‚ñ∏\x20','sticker','expulser','dirname','entries','filter','14868mRsHYu','‚ñ∏\x20Suppression:\x20','true','1995386LLAzQx','whitelist','>\x20üñº\x20Types\x20mis\x20√†\x20jour:\x0a','stringify','45mTLkSR','code','\x20tentatives','>\x20‚ùå\x20Format\x20invalide\x20(tableau\x20requis)'];a5_0x3aee=function(){return _0x4ea448;};return a5_0x3aee();}import a5_0x397c09 from'path';import{fileURLToPath}from'url';import{delete_message,send_text_message,send_reaction_message}from'../utils/sendmessagewa.js';import{isAdmin}from'../utils/gestion_groupe.js';const __dirname=a5_0x397c09[a5_0x4341d3(0x147)](fileURLToPath(import.meta[a5_0x4341d3(0x165)])),ANTIMEDIA_FILE=a5_0x397c09[a5_0x4341d3(0x163)](__dirname,a5_0x4341d3(0x12d)),defaultConfig={'groupesActives':{},'parametresGlobaux':{'supprimerMedia':!![],'avertir':!![],'expulser':!![],'maxTentatives':0x3,'typesBloques':[a5_0x4341d3(0x15f),a5_0x4341d3(0x13b),a5_0x4341d3(0x145),a5_0x4341d3(0x11b)]},'whitelist':[],'tentatives':{}};let config={...defaultConfig};async function chargerConfig(){const _0x5540dc=a5_0x4341d3;try{await a5_0x16a4d1[_0x5540dc(0x138)](a5_0x397c09[_0x5540dc(0x147)](ANTIMEDIA_FILE),{'recursive':!![]}),await a5_0x16a4d1[_0x5540dc(0x15e)](ANTIMEDIA_FILE);const _0x466270=await a5_0x16a4d1[_0x5540dc(0x12c)](ANTIMEDIA_FILE,_0x5540dc(0x12e));let _0x2c88e6=JSON['parse'](_0x466270);const _0x4b4848=Date[_0x5540dc(0x122)]();for(const _0x24c587 in _0x2c88e6['tentatives']){_0x4b4848-_0x2c88e6['tentatives'][_0x24c587][_0x5540dc(0x156)]>0x5265c00&&delete _0x2c88e6[_0x5540dc(0x141)][_0x24c587];}return{...defaultConfig,..._0x2c88e6};}catch(_0xda6743){if(_0xda6743[_0x5540dc(0x152)]!=='ENOENT')return console['error']('[AntiMedia]\x20Erreur\x20chargement\x20config:',_0xda6743),await a5_0x16a4d1[_0x5540dc(0x11d)](ANTIMEDIA_FILE,JSON[_0x5540dc(0x150)](defaultConfig,null,0x2),_0x5540dc(0x12e)),{...defaultConfig};return{...defaultConfig};}}async function sauvegarderConfig(){const _0x22d1b8=a5_0x4341d3;try{await a5_0x16a4d1[_0x22d1b8(0x11d)](ANTIMEDIA_FILE,JSON['stringify'](config,null,0x2),_0x22d1b8(0x12e));}catch(_0x11559c){console[_0x22d1b8(0x132)](_0x22d1b8(0x11e),_0x11559c);}}((async()=>{const _0x229f61=a5_0x4341d3;config=await chargerConfig(),console[_0x229f61(0x164)](_0x229f61(0x13f),Object['keys'](config[_0x229f61(0x128)])[_0x229f61(0x15c)],_0x229f61(0x15a));})());async function enregistrerTentative(_0x403aaf,_0x54fe9e){const _0x595401=a5_0x4341d3,_0x35c528=_0x403aaf+':'+_0x54fe9e,_0x22439c=Date[_0x595401(0x122)]();return config[_0x595401(0x141)][_0x35c528]={'count':(config['tentatives'][_0x35c528]?.['count']||0x0)+0x1,'lastAttempt':_0x22439c},await sauvegarderConfig(),config[_0x595401(0x141)][_0x35c528]['count'];}async function resetTentatives(_0x3be443,_0x3bb65c){const _0x4fcdeb=a5_0x4341d3,_0x4a3b7e=_0x3be443+':'+_0x3bb65c;config[_0x4fcdeb(0x141)][_0x4a3b7e]&&(delete config['tentatives'][_0x4a3b7e],await sauvegarderConfig());}function detecterMediaType(_0x556324){const _0x223e06=a5_0x4341d3,_0x29d193={'imageMessage':_0x223e06(0x15f),'videoMessage':_0x223e06(0x13b),'stickerMessage':_0x223e06(0x145),'documentMessage':_0x223e06(0x11b),'audioMessage':_0x223e06(0x157),'viewOnceMessage':()=>{const _0x18f623=_0x223e06,_0x4ef8cc=Object['keys'](_0x556324['message']?.[_0x18f623(0x130)]?.[_0x18f623(0x120)]||{})[0x0];return _0x4ef8cc?_0x29d193[_0x4ef8cc]:null;}};for(const [_0x5509d4,_0x139083]of Object[_0x223e06(0x148)](_0x29d193)){if(typeof _0x139083===_0x223e06(0x133)){const _0x39d756=_0x139083();if(_0x39d756)return _0x39d756;}else{if(_0x556324[_0x223e06(0x120)]?.[_0x5509d4])return _0x139083;}}return null;}export function creerAntiMediaBaileys(_0x3bfe57,_0x1320f6,_0x9c0c){return async()=>{const _0x5ebcfc=a5_0x4d46;try{if(!_0x1320f6[_0x5ebcfc(0x120)]||!_0x9c0c[_0x5ebcfc(0x155)](_0x5ebcfc(0x159)))return;if(_0x1320f6[_0x5ebcfc(0x120)]?.[_0x5ebcfc(0x121)]||_0x1320f6[_0x5ebcfc(0x120)]?.[_0x5ebcfc(0x15b)])return;if(!config['groupesActives'][_0x9c0c])return;const _0x44b4f0=_0x1320f6[_0x5ebcfc(0x15d)][_0x5ebcfc(0x13e)];if(!_0x44b4f0||await isAdmin(_0x3bfe57,_0x9c0c,_0x44b4f0))return;const _0x3c42fa={...config[_0x5ebcfc(0x11c)],...config[_0x5ebcfc(0x128)][_0x9c0c]},_0x1e0b84=detecterMediaType(_0x1320f6);if(!_0x1e0b84||!_0x3c42fa['typesBloques'][_0x5ebcfc(0x12f)](_0x1e0b84))return;const _0x446bf1=_0x44b4f0[_0x5ebcfc(0x142)]('@')[0x0],_0x1733e8=await enregistrerTentative(_0x9c0c,_0x44b4f0);_0x3c42fa[_0x5ebcfc(0x13d)]&&setTimeout(async()=>{const _0x39828b=_0x5ebcfc;await delete_message(_0x3bfe57,_0x1320f6,_0x9c0c,_0x1320f6[_0x39828b(0x15d)])[_0x39828b(0x158)](()=>{});},0x3e8),_0x3c42fa['avertir']&&await send_text_message(_0x3bfe57,_0x1320f6,_0x5ebcfc(0x13c)+_0x446bf1+',\x20'+_0x1e0b84+_0x5ebcfc(0x124)+_0x1733e8+'/'+_0x3c42fa[_0x5ebcfc(0x127)]+')',_0x9c0c,[_0x44b4f0],![],!![],![]),_0x1733e8>=_0x3c42fa['maxTentatives']&&_0x3c42fa[_0x5ebcfc(0x146)]&&(await _0x3bfe57[_0x5ebcfc(0x143)](_0x9c0c,[_0x44b4f0],'remove')[_0x5ebcfc(0x158)](()=>{}),await send_text_message(_0x3bfe57,_0x1320f6,'>\x20‚ùå\x20@'+_0x446bf1+_0x5ebcfc(0x12a),_0x9c0c,[_0x44b4f0],![],!![],![]),await resetTentatives(_0x9c0c,_0x44b4f0));}catch(_0x489159){console['error'](_0x5ebcfc(0x126),_0x489159);}};}function a5_0x4d46(_0x313606,_0x16bf41){const _0x3aee7a=a5_0x3aee();return a5_0x4d46=function(_0x4d4612,_0x2a92f9){_0x4d4612=_0x4d4612-0x11a;let _0x45093a=_0x3aee7a[_0x4d4612];return _0x45093a;},a5_0x4d46(_0x313606,_0x16bf41);}export async function ajouterGroupeAntimedia(_0x3c9b4b,_0x25db6f,_0x23e936,_0x5dab0c){const _0x195dee=a5_0x4341d3;if(!_0x5dab0c||!await isAdmin(_0x3c9b4b,_0x23e936,_0x25db6f['key'][_0x195dee(0x13e)]))return await send_reaction_message(_0x3c9b4b,_0x25db6f,_0x23e936,'‚ùå'),![];if(!config['groupesActives'][_0x23e936])return config['groupesActives'][_0x23e936]={...config[_0x195dee(0x11c)]},await sauvegarderConfig(),await send_reaction_message(_0x3c9b4b,_0x25db6f,_0x23e936,'‚úÖ'),await send_text_message(_0x3c9b4b,_0x25db6f,'>\x20üñº\x20AntiMedia\x20activ√©\x0a'+('‚ñ∏\x20Types\x20bloqu√©s:\x20'+config['parametresGlobaux'][_0x195dee(0x134)][_0x195dee(0x163)](',\x20')+'\x0a')+(_0x195dee(0x14b)+(config[_0x195dee(0x11c)]['supprimerMedia']?'‚úÖ':'‚ùå')+'\x0a')+(_0x195dee(0x136)+(config[_0x195dee(0x11c)][_0x195dee(0x137)]?'‚úÖ':'‚ùå')+'\x0a')+(_0x195dee(0x160)+config[_0x195dee(0x11c)][_0x195dee(0x127)]+_0x195dee(0x153)),_0x23e936),!![];return await send_reaction_message(_0x3c9b4b,_0x25db6f,_0x23e936,'‚ÑπÔ∏è'),await send_text_message(_0x3c9b4b,_0x25db6f,_0x195dee(0x162),_0x23e936),![];}export async function supprimerGroupeAntimedia(_0x16b466,_0xd71796,_0x527143,_0x2afe9e){const _0x50a679=a5_0x4341d3;if(!_0x2afe9e)return await send_reaction_message(_0x16b466,_0xd71796,_0x527143,'‚ùå'),![];if(config[_0x50a679(0x128)][_0x527143])return delete config[_0x50a679(0x128)][_0x527143],await sauvegarderConfig(),await send_reaction_message(_0x16b466,_0xd71796,_0x527143,'‚úÖ'),await send_text_message(_0x16b466,_0xd71796,'>\x20üñº\x20AntiMedia\x20d√©sactiv√©',_0x527143),!![];return await send_reaction_message(_0x16b466,_0xd71796,_0x527143,'‚ÑπÔ∏è'),await send_text_message(_0x16b466,_0xd71796,_0x50a679(0x140),_0x527143),![];}export async function configurerAntiMedia(_0x4482b2,_0x513168,_0x3d16c4,_0x468eb4,_0x82826){const _0x1d2eaa=a5_0x4341d3;if(!await isAdmin(_0x4482b2,_0x3d16c4,_0x513168['key']['participant']))return![];if(_0x468eb4===_0x1d2eaa(0x134)){if(!Array['isArray'](_0x82826))return await send_text_message(_0x4482b2,_0x513168,_0x1d2eaa(0x154),_0x3d16c4),![];return!config[_0x1d2eaa(0x128)][_0x3d16c4]&&(config[_0x1d2eaa(0x128)][_0x3d16c4]={...config[_0x1d2eaa(0x11c)]}),config[_0x1d2eaa(0x128)][_0x3d16c4][_0x1d2eaa(0x134)]=_0x82826,await sauvegarderConfig(),await send_reaction_message(_0x4482b2,_0x513168,_0x3d16c4,'‚úÖ'),await send_text_message(_0x4482b2,_0x513168,_0x1d2eaa(0x14f)+_0x82826['join'](',\x20'),_0x3d16c4),!![];}const _0x4a9228=[_0x1d2eaa(0x13d),'avertir','expulser',_0x1d2eaa(0x127)];if(!_0x4a9228['includes'](_0x468eb4))return![];return!config[_0x1d2eaa(0x128)][_0x3d16c4]&&(config[_0x1d2eaa(0x128)][_0x3d16c4]={...config[_0x1d2eaa(0x11c)]}),config[_0x1d2eaa(0x128)][_0x3d16c4][_0x468eb4]=_0x468eb4===_0x1d2eaa(0x127)?parseInt(_0x82826):_0x82826===_0x1d2eaa(0x14c),await sauvegarderConfig(),await send_reaction_message(_0x4482b2,_0x513168,_0x3d16c4,'‚úÖ'),await send_text_message(_0x4482b2,_0x513168,_0x1d2eaa(0x144)+_0x468eb4+':\x20'+config[_0x1d2eaa(0x128)][_0x3d16c4][_0x468eb4],_0x3d16c4),!![];}export async function gererWhitelist(_0x3cc2dc,_0x26677e,_0x3f05ae,_0x18dd0d,_0x107af5='add'){const _0x53b0f6=a5_0x4341d3;if(!await isAdmin(_0x3cc2dc,_0x3f05ae,_0x26677e['key'][_0x53b0f6(0x13e)]))return![];if(_0x107af5===_0x53b0f6(0x135)&&!config[_0x53b0f6(0x14e)]['includes'](_0x18dd0d))config[_0x53b0f6(0x14e)]['push'](_0x18dd0d);else _0x107af5===_0x53b0f6(0x166)&&(config[_0x53b0f6(0x14e)]=config[_0x53b0f6(0x14e)][_0x53b0f6(0x149)](_0x2f028d=>_0x2f028d!==_0x18dd0d));return await sauvegarderConfig(),await send_reaction_message(_0x3cc2dc,_0x26677e,_0x3f05ae,'‚úÖ'),await send_text_message(_0x3cc2dc,_0x26677e,_0x53b0f6(0x13a)+(_0x107af5===_0x53b0f6(0x135)?'ajout√©':'retir√©')+':\x20'+_0x18dd0d,_0x3f05ae),!![];}export async function getStatutAntiMedia(_0x581983){const _0x1fb57b=a5_0x4341d3;return{'estActif':!!config[_0x1fb57b(0x128)][_0x581983],'config':config[_0x1fb57b(0x128)][_0x581983]||config[_0x1fb57b(0x11c)],'whitelist':config[_0x1fb57b(0x14e)]};}