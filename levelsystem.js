const a25_0x22b22b=a25_0x1a32;(function(_0x492b70,_0x37e5c4){const _0x2c6de2=a25_0x1a32,_0x4443a0=_0x492b70();while(!![]){try{const _0x501d86=parseInt(_0x2c6de2(0x1ed))/0x1+-parseInt(_0x2c6de2(0x20c))/0x2*(-parseInt(_0x2c6de2(0x1e8))/0x3)+parseInt(_0x2c6de2(0x1f6))/0x4+-parseInt(_0x2c6de2(0x1f4))/0x5+-parseInt(_0x2c6de2(0x217))/0x6*(-parseInt(_0x2c6de2(0x216))/0x7)+-parseInt(_0x2c6de2(0x1d1))/0x8*(parseInt(_0x2c6de2(0x1d4))/0x9)+-parseInt(_0x2c6de2(0x1f2))/0xa;if(_0x501d86===_0x37e5c4)break;else _0x4443a0['push'](_0x4443a0['shift']());}catch(_0x11dee0){_0x4443a0['push'](_0x4443a0['shift']());}}}(a25_0x12ff,0x64ff0));import a25_0x59a698 from'fs/promises';import a25_0x4361a0 from'path';import{fileURLToPath}from'url';import{send_text_message,send_reaction_message}from'../utils/sendmessagewa.js';import{isAdmin}from'../utils/gestion_groupe.js';import{getLidFromJid}from'../utils/getidparticipantgroupe.js';const __dirname=a25_0x4361a0['dirname'](fileURLToPath(import.meta[a25_0x22b22b(0x1d5)])),LEVELSYSTEM_FILE=a25_0x4361a0['join'](__dirname,a25_0x22b22b(0x1f3)),defaultConfig={'groupesActives':{},'parametresGlobaux':{'xpParMessage':0x5,'xpMin':0x1,'xpMax':0xf,'cooldownXP':0x3c,'annonceNiveaux':!![]},'niveaux':{0x1:{'xpRequired':0x0},0x2:{'xpRequired':0x64},0x3:{'xpRequired':0x1f4},0x4:{'xpRequired':0x5dc},0x5:{'xpRequired':0x2710},0xa:{'xpRequired':0xc350},0x14:{'xpRequired':0x30d40},0x1e:{'xpRequired':0x7a120},0x32:{'xpRequired':0x16e360}},'utilisateurs':{},'cooldowns':{}};let config={...defaultConfig};async function chargerConfig(){const _0x2b6712=a25_0x22b22b;try{await a25_0x59a698[_0x2b6712(0x20b)](a25_0x4361a0[_0x2b6712(0x203)](LEVELSYSTEM_FILE),{'recursive':!![]}),await a25_0x59a698[_0x2b6712(0x1ec)](LEVELSYSTEM_FILE);const _0x91fa6d=await a25_0x59a698[_0x2b6712(0x213)](LEVELSYSTEM_FILE,_0x2b6712(0x1e3)),_0x2fd067=JSON[_0x2b6712(0x204)](_0x91fa6d);return{...defaultConfig,..._0x2fd067};}catch(_0x34a69d){return _0x34a69d[_0x2b6712(0x1df)]!==_0x2b6712(0x1dd)&&console[_0x2b6712(0x21e)]('[LevelSystem]\x20Erreur\x20chargement\x20config:',_0x34a69d),{...defaultConfig};}}function a25_0x12ff(){const _0x3e9b85=['â–¸\x20Nouveau\x20niveau:\x20','readFile','endsWith','â–¸\x20XP\x20total:\x20','7gWCqnz','1934754CELzYw','â–¸\x20Utilisez\x20rank\x20pour\x20voir\x20votre\x20niveau','sort','niveau','niveauChange','â–¸\x20Niveau\x20','writeFile','error','â–¸\x20XP:\x20','â–¸\x20Nouvel\x20XP:\x20','>\x20âœ…\x20XP\x20dÃ©fini\x20pour\x20@','â–¸\x20Messages:\x20','16ETmVqo','key','utilisateurs','2431647TsLLAr','url','join','reactionMessage','â–¸\x20Prochain\x20niveau:\x20','participant','Aucun\x20groupe\x20avec\x20LevelSystem','find','@g.us','ENOENT','now','code','messages','>\x20â„¹ï¸\x20DÃ©jÃ \x20activÃ©','length','utf-8','[LevelSystem]\x20Erreur\x20sauvegarde\x20config:','[LevelSystem]\x20Erreur:','â–¸\x20Annonces:\x20','floor','61845xiSIwd','parametresGlobaux','slice','split','access','610237HdOahV','annonceNiveaux','xpMin','>\x20ðŸ…\x20Rank\x20de\x20@','>\x20âš ï¸\x20Admin\x20requis','11370230TuADmr','json/levelsystem.json','351960Pmyeid','â–¸\x20Cooldown:\x20','1699120ZVnvbJ','>\x20âš ï¸\x20Commande\x20rÃ©servÃ©e\x20aux\x20groupes','repeat','\x20â†’\x20','nouveauNiveau','keys','entries','xpTotal','cooldowns','message','>\x20ðŸ“Š\x20Aucun\x20classement\x20disponible','xpMax','round','dirname','parse','forEach','protocolMessage','\x20!\x0a','groupesActives','â–¸\x20XP/message:\x20','niveaux','mkdir','78GDgiaI','cooldownXP','>\x20âœ…\x20DonnÃ©es\x20reset\x20pour\x20@','>\x20ðŸ†\x20LevelSystem\x20dÃ©sactivÃ©','xpRequired','map'];a25_0x12ff=function(){return _0x3e9b85;};return a25_0x12ff();}async function sauvegarderConfig(){const _0x3e4717=a25_0x22b22b;try{await a25_0x59a698[_0x3e4717(0x21d)](LEVELSYSTEM_FILE,JSON['stringify'](config,null,0x2),_0x3e4717(0x1e3));}catch(_0x1ba7af){console[_0x3e4717(0x21e)](_0x3e4717(0x1e4),_0x1ba7af);}}((async()=>{config=await chargerConfig();})());function initialiserUtilisateur(_0x443af5,_0x2545e1){const _0x527b63=a25_0x22b22b;return!config[_0x527b63(0x1d3)][_0x443af5]&&(config[_0x527b63(0x1d3)][_0x443af5]={}),!config['utilisateurs'][_0x443af5][_0x2545e1]&&(config['utilisateurs'][_0x443af5][_0x2545e1]={'xp':0x0,'niveau':0x1,'lastMessage':0x0,'messages':0x0}),config['utilisateurs'][_0x443af5][_0x2545e1];}function calculerNiveau(_0x1e4bc6){const _0x308d1e=a25_0x22b22b;let _0x140b1a=0x1;const _0x443bfc=Object[_0x308d1e(0x1fb)](config[_0x308d1e(0x20a)])['map'](Number)[_0x308d1e(0x219)]((_0x3dbd1e,_0x2cfc88)=>_0x3dbd1e-_0x2cfc88);for(const _0x3145f5 of _0x443bfc){if(_0x1e4bc6>=config[_0x308d1e(0x20a)][_0x3145f5]['xpRequired'])_0x140b1a=_0x3145f5;else break;}return _0x140b1a;}function xpPourProchainNiveau(_0x2628cc){const _0x276650=a25_0x22b22b,_0x22d073=Object[_0x276650(0x1fb)](config[_0x276650(0x20a)])['map'](Number)[_0x276650(0x219)]((_0x4d35a1,_0x4038de)=>_0x4d35a1-_0x4038de),_0x6d962=_0x22d073[_0x276650(0x1db)](_0x350b71=>_0x350b71>_0x2628cc);if(!_0x6d962)return 0x0;return config['niveaux'][_0x6d962][_0x276650(0x210)];}async function donnerXP(_0x2757cb,_0xb9f195){const _0x6f7524=a25_0x22b22b,_0x45293c=Date[_0x6f7524(0x1de)](),_0x541c63=_0x2757cb+':'+_0xb9f195;if(config[_0x6f7524(0x1fe)][_0x541c63]&&_0x45293c-config[_0x6f7524(0x1fe)][_0x541c63]<config[_0x6f7524(0x1e9)][_0x6f7524(0x20d)]*0x3e8)return![];const _0x1b48be=initialiserUtilisateur(_0x2757cb,_0xb9f195),_0x664ad=config[_0x6f7524(0x208)][_0x2757cb]||config[_0x6f7524(0x1e9)],_0x6958ca=Math[_0x6f7524(0x1e7)](Math['random']()*(_0x664ad[_0x6f7524(0x201)]-_0x664ad[_0x6f7524(0x1ef)]+0x1)+_0x664ad[_0x6f7524(0x1ef)]);_0x1b48be['xp']+=_0x6958ca,_0x1b48be[_0x6f7524(0x1e0)]+=0x1,_0x1b48be['lastMessage']=_0x45293c;const _0x295936=_0x1b48be['niveau'],_0x3c230c=calculerNiveau(_0x1b48be['xp']);return _0x1b48be[_0x6f7524(0x21a)]=_0x3c230c,config[_0x6f7524(0x1fe)][_0x541c63]=_0x45293c,await sauvegarderConfig(),{'xpGagne':_0x6958ca,'ancienNiveau':_0x295936,'nouveauNiveau':_0x3c230c,'xpTotal':_0x1b48be['xp'],'niveauChange':_0x295936!==_0x3c230c};}export function creerLevelSystemBaileys(_0x3a63cf,_0x2343af,_0x3bdf2a){return async()=>{const _0x3f9fb2=a25_0x1a32;try{if(!_0x2343af[_0x3f9fb2(0x1ff)]||!_0x3bdf2a[_0x3f9fb2(0x214)](_0x3f9fb2(0x1dc)))return;if(_0x2343af[_0x3f9fb2(0x1ff)][_0x3f9fb2(0x206)]||_0x2343af[_0x3f9fb2(0x1ff)][_0x3f9fb2(0x1d7)])return;if(!config[_0x3f9fb2(0x208)][_0x3bdf2a])return;const _0x25248b=_0x2343af[_0x3f9fb2(0x1d2)][_0x3f9fb2(0x1d9)];if(!_0x25248b)return;const _0x2deece=await donnerXP(_0x3bdf2a,_0x25248b);if(_0x2deece&&_0x2deece[_0x3f9fb2(0x21b)]&&config[_0x3f9fb2(0x1e9)][_0x3f9fb2(0x1ee)]){const _0x4f6cee=getLidFromJid(_0x25248b),_0x5d2825=xpPourProchainNiveau(_0x2deece[_0x3f9fb2(0x1fa)]);await send_text_message(_0x3a63cf,_0x2343af,'>\x20ðŸŽ‰\x20FÃ©licitations\x20@'+_0x4f6cee+_0x3f9fb2(0x207)+(_0x3f9fb2(0x21c)+_0x2deece['ancienNiveau']+_0x3f9fb2(0x1f9)+_0x2deece[_0x3f9fb2(0x1fa)]+'\x0a')+(_0x3f9fb2(0x215)+_0x2deece[_0x3f9fb2(0x1fd)]+'\x0a')+(_0x3f9fb2(0x1d8)+_0x5d2825+'\x20XP'),_0x3bdf2a,[_0x4f6cee],![],![],![]);}}catch(_0x36025b){console[_0x3f9fb2(0x21e)](_0x3f9fb2(0x1e5),_0x36025b);}};}export async function ajouterGroupeLevelSystem(_0x514d5a,_0x3fee3b,_0x35c89e,_0x25e22f){const _0x2f2796=a25_0x22b22b;if(!_0x25e22f)return await send_reaction_message(_0x514d5a,_0x3fee3b,_0x35c89e,'âŒ'),await send_text_message(_0x514d5a,_0x3fee3b,_0x2f2796(0x1f7),_0x35c89e),![];const _0x24a2a5=_0x3fee3b[_0x2f2796(0x1d2)][_0x2f2796(0x1d9)];if(!await isAdmin(_0x514d5a,_0x35c89e,_0x24a2a5))return await send_reaction_message(_0x514d5a,_0x3fee3b,_0x35c89e,'âŒ'),await send_text_message(_0x514d5a,_0x3fee3b,_0x2f2796(0x1f1),_0x35c89e),![];return!config[_0x2f2796(0x208)][_0x35c89e]?(config[_0x2f2796(0x208)][_0x35c89e]={...config[_0x2f2796(0x1e9)]},await sauvegarderConfig(),await send_reaction_message(_0x514d5a,_0x3fee3b,_0x35c89e,'âœ…'),await send_text_message(_0x514d5a,_0x3fee3b,'>\x20ðŸ†\x20LevelSystem\x20activÃ©\x0a'+(_0x2f2796(0x209)+config[_0x2f2796(0x1e9)]['xpMin']+'-'+config[_0x2f2796(0x1e9)][_0x2f2796(0x201)]+'\x0a')+(_0x2f2796(0x1f5)+config[_0x2f2796(0x1e9)]['cooldownXP']+'s\x0a')+(_0x2f2796(0x1e6)+(config[_0x2f2796(0x1e9)][_0x2f2796(0x1ee)]?'âœ…':'âŒ')+'\x0a')+_0x2f2796(0x218),_0x35c89e),!![]):(await send_reaction_message(_0x514d5a,_0x3fee3b,_0x35c89e,'â„¹ï¸'),await send_text_message(_0x514d5a,_0x3fee3b,_0x2f2796(0x1e1),_0x35c89e),![]);}export async function supprimerGroupeLevelSystem(_0x55730b,_0xc813c6,_0x1fb3ef,_0x20c8c8){const _0x21d31b=a25_0x22b22b;if(!_0x20c8c8)return await send_reaction_message(_0x55730b,_0xc813c6,_0x1fb3ef,'âŒ'),await send_text_message(_0x55730b,_0xc813c6,_0x21d31b(0x1f7),_0x1fb3ef),![];const _0x27fe0a=_0xc813c6[_0x21d31b(0x1d2)][_0x21d31b(0x1d9)];if(!await isAdmin(_0x55730b,_0x1fb3ef,_0x27fe0a))return await send_reaction_message(_0x55730b,_0xc813c6,_0x1fb3ef,'âŒ'),await send_text_message(_0x55730b,_0xc813c6,_0x21d31b(0x1f1),_0x1fb3ef),![];if(config[_0x21d31b(0x208)][_0x1fb3ef])return delete config[_0x21d31b(0x208)][_0x1fb3ef],await sauvegarderConfig(),await send_reaction_message(_0x55730b,_0xc813c6,_0x1fb3ef,'âœ…'),await send_text_message(_0x55730b,_0xc813c6,_0x21d31b(0x20f),_0x1fb3ef),!![];return await send_reaction_message(_0x55730b,_0xc813c6,_0x1fb3ef,'â„¹ï¸'),await send_text_message(_0x55730b,_0xc813c6,'>\x20â„¹ï¸\x20Non\x20activÃ©',_0x1fb3ef),![];}export async function afficherRank(_0x35c8b2,_0x2606c1,_0x4c21c4,_0x2a3782){const _0x3f2807=a25_0x22b22b;if(!_0x2a3782||!config[_0x3f2807(0x208)][_0x4c21c4])return;const _0x416c02=_0x2606c1[_0x3f2807(0x1d2)][_0x3f2807(0x1d9)],_0x288597=initialiserUtilisateur(_0x4c21c4,_0x416c02),_0x236747=xpPourProchainNiveau(_0x288597['niveau']),_0x3dca5d=_0x236747>0x0?Math[_0x3f2807(0x202)](_0x288597['xp']/_0x236747*0x64):0x64,_0x44ae77=0xa,_0x3befb0=Math['round'](_0x3dca5d/0x64*_0x44ae77),_0x1f460b='â–ˆ'[_0x3f2807(0x1f8)](_0x3befb0)+'â–‘'[_0x3f2807(0x1f8)](_0x44ae77-_0x3befb0);await send_text_message(_0x35c8b2,_0x2606c1,_0x3f2807(0x1f0)+_0x416c02[_0x3f2807(0x1eb)]('@')[0x0]+'\x0a'+('â–¸\x20Niveau:\x20'+_0x288597[_0x3f2807(0x21a)]+'\x0a')+(_0x3f2807(0x21f)+_0x288597['xp']+'/'+_0x236747+'\x0a')+(_0x3f2807(0x1d0)+_0x288597[_0x3f2807(0x1e0)]+'\x0a')+('â–¸\x20Progression:\x20['+_0x1f460b+']\x20'+_0x3dca5d+'%'),_0x4c21c4,[_0x416c02],![],!![],![]);}export async function afficherLeaderboard(_0x26791d,_0x3c3044,_0x5cae4d,_0x24f596){const _0x3df542=a25_0x22b22b;if(!_0x24f596||!config[_0x3df542(0x208)][_0x5cae4d])return;const _0x307f2f=config[_0x3df542(0x1d3)][_0x5cae4d];if(!_0x307f2f||Object['keys'](_0x307f2f)[_0x3df542(0x1e2)]===0x0){await send_text_message(_0x26791d,_0x3c3044,_0x3df542(0x200),_0x5cae4d);return;}const _0x31fb76=Object[_0x3df542(0x1fc)](_0x307f2f)[_0x3df542(0x219)](([,_0x41468d],[,_0x4fbf16])=>_0x4fbf16['xp']-_0x41468d['xp'])[_0x3df542(0x1ea)](0x0,0xa);let _0x34aa14='>\x20ðŸ†\x20Classement\x20du\x20groupe\x0a\x0a';_0x31fb76[_0x3df542(0x205)](([_0x5af6d7,_0x242127],_0x4a3004)=>{const _0x4890ca=_0x3df542,_0x3f95c7=_0x5af6d7[_0x4890ca(0x1eb)]('@')[0x0],_0x445685=_0x4a3004===0x0?'ðŸ¥‡':_0x4a3004===0x1?'ðŸ¥ˆ':_0x4a3004===0x2?'ðŸ¥‰':_0x4a3004+0x1+'.';_0x34aa14+=_0x445685+'\x20@'+_0x3f95c7+'\x20-\x20Niv.'+_0x242127[_0x4890ca(0x21a)]+'\x20('+_0x242127['xp']+'\x20XP)\x0a';}),await send_text_message(_0x26791d,_0x3c3044,_0x34aa14,_0x5cae4d,_0x31fb76[_0x3df542(0x211)](([_0x43742b])=>_0x43742b),![],!![],![]);}export async function setXP(_0x4b2e6c,_0x3f53f1,_0x510876,_0x4ff1da,_0xe1cd98){const _0x31aac9=a25_0x22b22b;if(!await isAdmin(_0x4b2e6c,_0x510876,_0x3f53f1['key']['participant']))return await send_reaction_message(_0x4b2e6c,_0x3f53f1,_0x510876,'âŒ'),![];const _0x5bbc91=initialiserUtilisateur(_0x510876,_0x4ff1da);return _0x5bbc91['xp']=parseInt(_0xe1cd98),_0x5bbc91[_0x31aac9(0x21a)]=calculerNiveau(_0x5bbc91['xp']),await sauvegarderConfig(),await send_reaction_message(_0x4b2e6c,_0x3f53f1,_0x510876,'âœ…'),await send_text_message(_0x4b2e6c,_0x3f53f1,_0x31aac9(0x221)+_0x4ff1da[_0x31aac9(0x1eb)]('@')[0x0]+'\x0a'+(_0x31aac9(0x220)+_0x5bbc91['xp']+'\x0a')+(_0x31aac9(0x212)+_0x5bbc91[_0x31aac9(0x21a)]),_0x510876,[_0x4ff1da],![],!![],![]),!![];}export async function resetUser(_0x1669f1,_0x3f292e,_0x47dd7e,_0x7f3121){const _0x5a7288=a25_0x22b22b;if(!await isAdmin(_0x1669f1,_0x47dd7e,_0x3f292e[_0x5a7288(0x1d2)][_0x5a7288(0x1d9)]))return await send_reaction_message(_0x1669f1,_0x3f292e,_0x47dd7e,'âŒ'),![];if(config[_0x5a7288(0x1d3)][_0x47dd7e]&&config[_0x5a7288(0x1d3)][_0x47dd7e][_0x7f3121])return delete config[_0x5a7288(0x1d3)][_0x47dd7e][_0x7f3121],await sauvegarderConfig(),await send_reaction_message(_0x1669f1,_0x3f292e,_0x47dd7e,'âœ…'),await send_text_message(_0x1669f1,_0x3f292e,_0x5a7288(0x20e)+_0x7f3121[_0x5a7288(0x1eb)]('@')[0x0],_0x47dd7e,[_0x7f3121],![],!![],![]),!![];return await send_reaction_message(_0x1669f1,_0x3f292e,_0x47dd7e,'âŒ'),![];}function a25_0x1a32(_0x4d35a3,_0x419ba3){const _0x12ff8f=a25_0x12ff();return a25_0x1a32=function(_0x1a32bf,_0x70c830){_0x1a32bf=_0x1a32bf-0x1d0;let _0x2de3b5=_0x12ff8f[_0x1a32bf];return _0x2de3b5;},a25_0x1a32(_0x4d35a3,_0x419ba3);}export function getConfigLevelSystem(){return config;}export async function listerGroupesLevelSystem(){const _0x5893d7=a25_0x22b22b;return Object[_0x5893d7(0x1fb)](config['groupesActives'])['map'](_0x1926c5=>'â–¸\x20'+_0x1926c5[_0x5893d7(0x1eb)]('@')[0x0])[_0x5893d7(0x1d6)]('\x0a')||_0x5893d7(0x1da);}