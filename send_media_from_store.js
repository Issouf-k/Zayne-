const a39_0x72a6c6=a39_0x31e0;function a39_0x31e0(_0x249bf5,_0x368ffc){const _0x449386=a39_0x4493();return a39_0x31e0=function(_0x31e046,_0x384ee7){_0x31e046=_0x31e046-0x129;let _0x566f20=_0x449386[_0x31e046];return _0x566f20;},a39_0x31e0(_0x249bf5,_0x368ffc);}(function(_0x1823e8,_0x12e36d){const _0x6b4040=a39_0x31e0,_0x380f47=_0x1823e8();while(!![]){try{const _0x54d74a=parseInt(_0x6b4040(0x166))/0x1*(parseInt(_0x6b4040(0x137))/0x2)+parseInt(_0x6b4040(0x13d))/0x3+-parseInt(_0x6b4040(0x158))/0x4+parseInt(_0x6b4040(0x14f))/0x5+parseInt(_0x6b4040(0x165))/0x6*(-parseInt(_0x6b4040(0x135))/0x7)+parseInt(_0x6b4040(0x15d))/0x8*(parseInt(_0x6b4040(0x136))/0x9)+-parseInt(_0x6b4040(0x157))/0xa*(parseInt(_0x6b4040(0x142))/0xb);if(_0x54d74a===_0x12e36d)break;else _0x380f47['push'](_0x380f47['shift']());}catch(_0x54c63c){_0x380f47['push'](_0x380f47['shift']());}}}(a39_0x4493,0xb34cc));import{send_audio_message,send_contact_message,send_gif_message,send_image_message,send_location_message,send_reaction_message,send_text_message,send_video_message,chercherFichier,send_sticker_message}from'../utils/sendmessagewa.js';import{supprimerFichierCommencantPar}from'../utils/vu_unique.js';import a39_0x27434b from'pino';import a39_0x177e81 from'dotenv';import{listerMedias}from'../utils/listermedia.js';import{extname,join}from'path';function a39_0x4493(){const _0x5d0440=['\x22\x20(','Aucun\x20fichier\x20trouv√©\x20pour\x20','join','pid,hostname','push','>\x20‚ö†Ô∏è\x20Type\x20de\x20m√©dia\x20non\x20support√©:\x20','.mp4','>\x20‚ö†Ô∏è\x20Aucun\x20m√©dia\x20trouv√©\x20avec\x20le\x20nom\x20\x22','4633426obDpYf','9ohghgp','4RbHRTF','message','config','audio','LOG_LEVEL','gif','574584xUSMui','extension','Chemin\x20du\x20fichier\x20m√©dia:\x20','>\x20‚ö†Ô∏è\x20Nom\x20de\x20fichier\x20manquant!\x0aUsage:\x20','>\x20‚ö†Ô∏è\x20Erreur\x20lors\x20de\x20l\x27envoi\x20du\x20m√©dia\x20','11kaxEee','extensions','info','\x20avec\x20l\x27extension\x20','Param√®tres\x20manquants\x20pour\x20l\x27envoi\x20de\x20m√©dia','.jpg','.m4a','>\x20‚ö†Ô∏è\x20Veuillez\x20sp√©cifier\x20le\x20type\x20de\x20m√©dia\x20√†\x20supprimer\x20(image,\x20video,\x20audio,\x20gif,\x20sticker).','sticker','.ogg','./media','keys','ptv','4997560qZMuZB','warn','>\x20‚ö†Ô∏è\x20Erreur\x20lors\x20de\x20la\x20r√©cup√©ration\x20de\x20la\x20liste','error','pino-pretty','env','Recherche\x20de\x20fichier\x20pour\x20',',\x20cela\x20peut\x20etre\x20du\x20a\x20une\x20erreur\x20de\x20saisi\x20ou\x20fichier\x20inexistant\x20faite\x20','6101530eSafbh','4944112edqyqq','existsSync','Erreur\x20lors\x20de\x20la\x20liste\x20des\x20m√©dias','list\x20pour\x20voir\x20les\x20m√©dias\x20disponibles','\x22\x20introuvable!','11632536LbLpAD','err','>\x20‚ö†Ô∏è\x20Veuillez\x20sp√©cifier\x20le\x20nom\x20du\x20m√©dia\x20√†\x20supprimer.','whatsapp-media','{msg}\x20{if\x20err}{err.stack}{end}','.webp','debug','>\x20‚ö†Ô∏è\x20','6DUzxSC','298702sqAPZv','length','trim','>\x20‚ö†Ô∏è\x20Type\x20de\x20m√©dia\x20invalide!\x0aTypes\x20valides:\x20','HH:MM:ss','>\x20‚ö†Ô∏è\x20R√©pertoire\x20m√©dia\x20non\x20configur√©','Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20m√©dia','Erreur\x20lors\x20de\x20l\x27envoi\x20du\x20m√©dia\x20','>\x20‚ö†Ô∏è\x20√âchec\x20de\x20la\x20suppression:\x20','MEDIA_PATH'];a39_0x4493=function(){return _0x5d0440;};return a39_0x4493();}import{existsSync}from'fs';import a39_0x347501 from'fs';a39_0x177e81[a39_0x72a6c6(0x139)]();const logger=a39_0x27434b({'level':process[a39_0x72a6c6(0x154)][a39_0x72a6c6(0x13b)]||'debug','transport':{'target':a39_0x72a6c6(0x153),'options':{'colorize':!![],'ignore':a39_0x72a6c6(0x130),'translateTime':a39_0x72a6c6(0x16a),'includeStack':!![],'errorLikeObjectKeys':[a39_0x72a6c6(0x15e),'error'],'messageFormat':a39_0x72a6c6(0x161)}},'base':null,'serializers':{'error':a39_0x27434b['stdSerializers'][a39_0x72a6c6(0x15e)]}}),PREFIXE=process[a39_0x72a6c6(0x154)]['PREFIXE']||'!',MEDIA_PATH=process[a39_0x72a6c6(0x154)][a39_0x72a6c6(0x12c)]||a39_0x72a6c6(0x14c),MEDIA_TYPES={'image':{'extension':a39_0x72a6c6(0x147),'sendFunction':send_image_message},'video':{'extension':a39_0x72a6c6(0x133),'sendFunction':send_video_message},'audio':{'extensions':[a39_0x72a6c6(0x14b),a39_0x72a6c6(0x148)],'sendFunction':send_audio_message},'gif':{'extension':a39_0x72a6c6(0x133),'sendFunction':send_gif_message},'sticker':{'extension':a39_0x72a6c6(0x162),'sendFunction':send_sticker_message}};function getMediaFilePath(_0x3369ff,_0x175252){const _0x1498e6=a39_0x72a6c6,_0x3aa6c8=MEDIA_TYPES[_0x175252];if(_0x3aa6c8['extensions']){for(const _0x22dac5 of _0x3aa6c8[_0x1498e6(0x143)]){const _0x126e7a=join(MEDIA_PATH,_0x3369ff+'_'+_0x175252+_0x22dac5);if(a39_0x347501[_0x1498e6(0x159)](_0x126e7a))return _0x126e7a;}return logger['warn'](_0x1498e6(0x12e)+_0x3369ff+'\x20avec\x20les\x20extensions\x20'+_0x3aa6c8[_0x1498e6(0x143)][_0x1498e6(0x12f)](',\x20')),join(MEDIA_PATH,_0x3369ff+'_'+_0x175252+_0x3aa6c8[_0x1498e6(0x143)][0x0]);}else return logger[_0x1498e6(0x163)](_0x1498e6(0x155)+_0x3369ff+_0x1498e6(0x145)+_0x3aa6c8[_0x1498e6(0x13e)]),join(MEDIA_PATH,_0x3369ff+'_'+_0x175252+_0x3aa6c8[_0x1498e6(0x13e)]);}function ensureMediaDirectory(){const _0x129fa2=a39_0x72a6c6;if(!MEDIA_PATH)throw new Error('MEDIA_PATH\x20n\x27est\x20pas\x20configur√©');if(!existsSync(MEDIA_PATH))return logger[_0x129fa2(0x150)]('Le\x20r√©pertoire\x20m√©dia\x20n\x27existe\x20pas:\x20'+MEDIA_PATH),![];return!![];}export async function send_media_from_store(_0x3e3f68,_0x2b65c5,_0x38cf18,_0x187abb,_0x5a0a3b,_0x3ce607=undefined,_0x5511d8=undefined,_0x34cd14=undefined){const _0x27ebaa=a39_0x72a6c6;try{if(!_0x2b65c5||!_0x38cf18||!_0x187abb)throw new Error(_0x27ebaa(0x146));if(!_0x5a0a3b||_0x5a0a3b[_0x27ebaa(0x168)]()==='')return await send_reaction_message(_0x2b65c5,_0x38cf18,_0x187abb,'‚ùå'),await send_text_message(_0x2b65c5,_0x38cf18,_0x27ebaa(0x140)+PREFIXE+_0x3e3f68+'\x20<nom>',_0x187abb,undefined,!![],![],!![]);if(!MEDIA_TYPES[_0x3e3f68])return await send_reaction_message(_0x2b65c5,_0x38cf18,_0x187abb,'‚ùå'),await send_text_message(_0x2b65c5,_0x38cf18,_0x27ebaa(0x132)+_0x3e3f68,_0x187abb,undefined,!![],![],!![]);if(!ensureMediaDirectory())return await send_reaction_message(_0x2b65c5,_0x38cf18,_0x187abb,'‚ùå'),await send_text_message(_0x2b65c5,_0x38cf18,_0x27ebaa(0x16b),_0x187abb,undefined,!![],![],!![]);const _0x2f142c=getMediaFilePath(_0x5a0a3b,_0x3e3f68);logger['debug'](_0x27ebaa(0x13f)+_0x2f142c);if(!chercherFichier(_0x5a0a3b,_0x3e3f68,MEDIA_PATH))return await send_reaction_message(_0x2b65c5,_0x38cf18,_0x187abb,'‚ùå'),await send_text_message(_0x2b65c5,_0x38cf18,_0x27ebaa(0x164)+_0x3e3f68+'\x20\x22'+_0x5a0a3b+_0x27ebaa(0x15c),_0x187abb,undefined,!![],![],!![]);await send_reaction_message(_0x2b65c5,_0x38cf18,_0x187abb,'‚è≥');switch(_0x3e3f68){case'image':await send_image_message(_0x2b65c5,_0x38cf18,_0x187abb,_0x2f142c,undefined,_0x3ce607==='vo');break;case'video':await send_video_message(_0x2b65c5,_0x38cf18,_0x187abb,_0x2f142c,undefined,_0x5511d8===_0x27ebaa(0x14e),_0x3ce607==='vo');break;case'audio':_0x3e3f68===_0x27ebaa(0x13a)&&_0x34cd14=='ptt'?(logger[_0x27ebaa(0x144)]('Envoi\x20d\x27un\x20message\x20audio\x20OGG'),await send_audio_message(_0x2b65c5,_0x38cf18,_0x187abb,_0x2f142c,![],_0x3ce607==='vo')):(logger['info']('Envoi\x20d\x27un\x20message\x20audio\x20standard'),await send_audio_message(_0x2b65c5,_0x38cf18,_0x187abb,_0x2f142c,undefined,_0x3ce607==='vo'));break;case _0x27ebaa(0x13c):await send_gif_message(_0x2b65c5,_0x38cf18,_0x187abb,_0x2f142c);break;case _0x27ebaa(0x14a):await send_sticker_message(_0x2b65c5,_0x38cf18,_0x187abb,_0x2f142c,![]);break;}await send_reaction_message(_0x2b65c5,_0x38cf18,_0x187abb,'‚úÖ');}catch(_0x670a7e){logger[_0x27ebaa(0x152)]({'error':_0x670a7e},_0x27ebaa(0x12a)+_0x3e3f68),await send_reaction_message(_0x2b65c5,_0x38cf18,_0x187abb,'‚ùå'),await send_text_message(_0x2b65c5,_0x38cf18,_0x27ebaa(0x141)+_0x3e3f68+_0x27ebaa(0x156)+PREFIXE+_0x27ebaa(0x15b),_0x187abb,undefined,!![],![],!![]);}}export const liste_media=async(_0x3ee0f1,_0x5c19ae,_0x391474)=>{const _0x397d79=a39_0x72a6c6;try{await send_reaction_message(_0x3ee0f1,_0x5c19ae,_0x391474,'‚è≥');if(!ensureMediaDirectory())return await send_reaction_message(_0x3ee0f1,_0x5c19ae,_0x391474,'‚ùå'),await send_text_message(_0x3ee0f1,_0x5c19ae,_0x397d79(0x16b),_0x391474,undefined,!![],![],!![]);const _0x994c65=await listerMedias(_0x397d79(0x160));if(!_0x994c65||_0x994c65[_0x397d79(0x168)]()==='')await send_text_message(_0x3ee0f1,_0x5c19ae,'>\x20‚ÑπÔ∏è\x20Aucun\x20m√©dia\x20enregistr√©',_0x391474,undefined,!![],![],!![]),await send_reaction_message(_0x3ee0f1,_0x5c19ae,_0x391474,'‚ÑπÔ∏è');else{const _0x1952e5=0x1000;if(_0x994c65[_0x397d79(0x167)]>_0x1952e5){const _0x450b4c=[];for(let _0x4ff39b=0x0;_0x4ff39b<_0x994c65[_0x397d79(0x167)];_0x4ff39b+=_0x1952e5){_0x450b4c[_0x397d79(0x131)](_0x994c65['substring'](_0x4ff39b,_0x4ff39b+_0x1952e5));}for(const _0xa19da0 of _0x450b4c){await send_text_message(_0x3ee0f1,_0x5c19ae,_0xa19da0,_0x391474,undefined,!![]);}}else await send_text_message(_0x3ee0f1,_0x5c19ae,_0x994c65,_0x391474,undefined,!![]);await send_reaction_message(_0x3ee0f1,_0x5c19ae,_0x391474,'‚úÖ');}}catch(_0x59e16c){logger[_0x397d79(0x152)]({'error':_0x59e16c},_0x397d79(0x15a)),await send_reaction_message(_0x3ee0f1,_0x5c19ae,_0x391474,'‚ùå'),await send_text_message(_0x3ee0f1,_0x5c19ae,_0x397d79(0x151),_0x391474,undefined,!![],![],!![]);}};export const del_media=async(_0x4419dc,_0x2daf8d,_0x59989f,_0x166922)=>{const _0x256cb1=a39_0x72a6c6;try{if(!_0x166922||_0x166922['length']===0x0)return await send_reaction_message(_0x4419dc,_0x2daf8d,_0x59989f,'‚ùå'),await send_text_message(_0x4419dc,_0x2daf8d,_0x256cb1(0x15f),_0x59989f,undefined,!![],![],!![]);const _0x19d1e7=_0x166922[0x0][_0x256cb1(0x168)](),_0x13dbc0=_0x166922[0x1]?_0x166922[0x1]['toLowerCase']()[_0x256cb1(0x168)]():null;if(!_0x13dbc0)return await send_reaction_message(_0x4419dc,_0x2daf8d,_0x59989f,'‚ùå'),await send_text_message(_0x4419dc,_0x2daf8d,_0x256cb1(0x149),_0x59989f,undefined,!![],![],!![]);if(!MEDIA_TYPES[_0x13dbc0])return await send_reaction_message(_0x4419dc,_0x2daf8d,_0x59989f,'‚ùå'),await send_text_message(_0x4419dc,_0x2daf8d,_0x256cb1(0x169)+Object[_0x256cb1(0x14d)](MEDIA_TYPES)[_0x256cb1(0x12f)](',\x20'),_0x59989f,undefined,!![],![],!![]);if(!ensureMediaDirectory())return await send_reaction_message(_0x4419dc,_0x2daf8d,_0x59989f,'‚ùå'),await send_text_message(_0x4419dc,_0x2daf8d,_0x256cb1(0x16b),_0x59989f,undefined,!![],![],!![]);await send_reaction_message(_0x4419dc,_0x2daf8d,_0x59989f,'‚è≥');const _0x5ca3b0=await supprimerFichierCommencantPar(MEDIA_PATH,_0x19d1e7+'_'+_0x13dbc0);return _0x5ca3b0?(await send_reaction_message(_0x4419dc,_0x2daf8d,_0x59989f,'‚úÖ'),await send_text_message(_0x4419dc,_0x2daf8d,'>\x20üóëÔ∏è\x20M√©dia\x20\x22'+_0x19d1e7+_0x256cb1(0x12d)+_0x13dbc0+')\x20supprim√©\x20avec\x20succ√®s.',_0x59989f,undefined,!![]),!![]):(await send_reaction_message(_0x4419dc,_0x2daf8d,_0x59989f,'‚ùå'),await send_text_message(_0x4419dc,_0x2daf8d,_0x256cb1(0x134)+_0x19d1e7+'\x22\x20et\x20le\x20type\x20\x22'+_0x13dbc0+'\x22.',_0x59989f,undefined,!![],![],!![]),![]);}catch(_0x139a19){return logger[_0x256cb1(0x152)]({'error':_0x139a19},_0x256cb1(0x129)),await send_reaction_message(_0x4419dc,_0x2daf8d,_0x59989f,'‚ùå'),await send_text_message(_0x4419dc,_0x2daf8d,_0x256cb1(0x12b)+_0x139a19[_0x256cb1(0x138)],_0x59989f,undefined,!![],![],!![]),![];}};