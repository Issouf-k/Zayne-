const a8_0x2c041f=a8_0x4d5d;(function(_0x1cc3a7,_0x17ece4){const _0x408b94=a8_0x4d5d,_0x15ffa6=_0x1cc3a7();while(!![]){try{const _0x33527c=-parseInt(_0x408b94(0xce))/0x1+-parseInt(_0x408b94(0xcc))/0x2+-parseInt(_0x408b94(0xb6))/0x3+-parseInt(_0x408b94(0xc7))/0x4+parseInt(_0x408b94(0x9e))/0x5*(-parseInt(_0x408b94(0xba))/0x6)+parseInt(_0x408b94(0xc9))/0x7*(-parseInt(_0x408b94(0xbc))/0x8)+parseInt(_0x408b94(0xb2))/0x9;if(_0x33527c===_0x17ece4)break;else _0x15ffa6['push'](_0x15ffa6['shift']());}catch(_0x364c8d){_0x15ffa6['push'](_0x15ffa6['shift']());}}}(a8_0x3680,0xc3b92));import a8_0x399501 from'fs/promises';import a8_0x346a67 from'path';import{fileURLToPath}from'url';import{delete_message,send_text_message,send_reaction_message}from'../utils/sendmessagewa.js';import{isAdmin}from'../utils/gestion_groupe.js';const __dirname=a8_0x346a67[a8_0x2c041f(0xc2)](fileURLToPath(import.meta['url'])),ANTISPAM_FILE=a8_0x346a67['join'](__dirname,a8_0x2c041f(0xbd)),defaultConfig={'groupesActives':{},'parametresGlobaux':{'supprimerMessage':!![],'avertir':!![],'expulser':!![],'maxMessages':0x5,'timeFrame':0x2710},'tentatives':{}};let config={...defaultConfig};function a8_0x3680(){const _0x64935c=['protocolMessage','parse','[AntiSpam]\x20Erreur\x20sauvegarde\x20config:','map','>\x20‚ö†Ô∏è\x20AntiSpam\x20non\x20activ√©\x20dans\x20ce\x20groupe','lastMessageTime','Aucun\x20groupe','>\x20üö´\x20AntiSpam\x20activ√©\x0a','message','ENOENT','access','tentatives','writeFile','>\x20‚ùå\x20@','join','readFile','‚ñ∏\x20Max\x20messages:\x20','>\x20‚ÑπÔ∏è\x20D√©j√†\x20activ√©','76250NhLDrd','@g.us','[AntiSpam]\x20Erreur\x20lors\x20de\x20l\x27expulsion:','parametresGlobaux','supprimerMessage','timeFrame','maxMessages','[AntiSpam]\x20Erreur:','\x20n\x27est\x20plus\x20dans\x20le\x20groupe\x20','key',',\x20attention\x20vous\x20avez\x20envoy√©\x20','endsWith','error','[AntiSpam]\x20L\x27utilisateur\x20','reactionMessage','utf-8','mkdir','count','code','keys','41164875RgTGAV','log','\x20a\x20√©t√©\x20expuls√©\x20pour\x20spam.','remove','2298348evLcef','>\x20‚ö†Ô∏è\x20Commande\x20r√©serv√©e\x20aux\x20groupes','participant','now','156kXIDfy','>\x20üö´\x20Configuration\x20AntiSpam\x20mise\x20√†\x20jour','32rEmuUc','json/antispam.json','groupesActives','\x20messages/','[AntiSpam]\x20Erreur\x20chargement\x20config:','split','dirname','\x20messages\x20rapidement\x20!\x20(Limite:\x20','>\x20‚ö†Ô∏è\x20Admin\x20requis','groupMetadata','jid','3314016wjZdew','avertir','2275945omnJof','catch','‚ñ∏\x20Expulsion:\x20','114930rADSHS','expulser','423068plxfGy','‚ñ∏\x20Suppression:\x20','participants','stringify'];a8_0x3680=function(){return _0x64935c;};return a8_0x3680();}async function chargerConfig(){const _0x19e627=a8_0x2c041f;try{await a8_0x399501[_0x19e627(0xae)](a8_0x346a67[_0x19e627(0xc2)](ANTISPAM_FILE),{'recursive':!![]}),await a8_0x399501[_0x19e627(0xdc)](ANTISPAM_FILE);const _0x39db5a=await a8_0x399501[_0x19e627(0xe1)](ANTISPAM_FILE,_0x19e627(0xad)),_0x41766a=JSON[_0x19e627(0xd3)](_0x39db5a),_0x575840=Date[_0x19e627(0xb9)]();for(const _0x2d6127 in _0x41766a['tentatives']){_0x575840-_0x41766a[_0x19e627(0xdd)][_0x2d6127][_0x19e627(0xd7)]>0x5265c00&&delete _0x41766a[_0x19e627(0xdd)][_0x2d6127];}return{...defaultConfig,..._0x41766a};}catch(_0x3d91b8){if(_0x3d91b8[_0x19e627(0xb0)]!==_0x19e627(0xdb))return console[_0x19e627(0xaa)](_0x19e627(0xc0),_0x3d91b8),await a8_0x399501['writeFile'](ANTISPAM_FILE,JSON[_0x19e627(0xd1)](defaultConfig,null,0x2),_0x19e627(0xad)),{...defaultConfig};return{...defaultConfig};}}function a8_0x4d5d(_0x3664a0,_0x1a5d7a){const _0x3680ae=a8_0x3680();return a8_0x4d5d=function(_0x4d5dda,_0x49612e){_0x4d5dda=_0x4d5dda-0x9e;let _0x377b89=_0x3680ae[_0x4d5dda];return _0x377b89;},a8_0x4d5d(_0x3664a0,_0x1a5d7a);}async function sauvegarderConfig(){const _0x106719=a8_0x2c041f;try{await a8_0x399501[_0x106719(0xde)](ANTISPAM_FILE,JSON[_0x106719(0xd1)](config,null,0x2),_0x106719(0xad));}catch(_0x58b35a){console['error'](_0x106719(0xd4),_0x58b35a);}}((async()=>{config=await chargerConfig();})());async function enregistrerMessage(_0x34a9a4,_0x25ed05){const _0x3b147e=a8_0x2c041f,_0x5276c5=_0x34a9a4+':'+_0x25ed05,_0x5f14f6=Date[_0x3b147e(0xb9)]();return config[_0x3b147e(0xdd)][_0x5276c5]&&_0x5f14f6-config[_0x3b147e(0xdd)][_0x5276c5][_0x3b147e(0xd7)]>config[_0x3b147e(0xa1)][_0x3b147e(0xa3)]?config[_0x3b147e(0xdd)][_0x5276c5]={'count':0x1,'lastMessageTime':_0x5f14f6}:config[_0x3b147e(0xdd)][_0x5276c5]={'count':(config['tentatives'][_0x5276c5]?.[_0x3b147e(0xaf)]||0x0)+0x1,'lastMessageTime':_0x5f14f6},await sauvegarderConfig(),config[_0x3b147e(0xdd)][_0x5276c5][_0x3b147e(0xaf)];}async function resetTentatives(_0x41d770,_0x4f0af5){const _0x39b40c=a8_0x2c041f,_0x2941d1=_0x41d770+':'+_0x4f0af5;config[_0x39b40c(0xdd)][_0x2941d1]&&(delete config[_0x39b40c(0xdd)][_0x2941d1],await sauvegarderConfig());}export function creerAntiSpamBaileys(_0x35c0db,_0x11ced1,_0x144bea){return async()=>{const _0x32d4f2=a8_0x4d5d;try{if(!_0x11ced1[_0x32d4f2(0xda)]||!_0x144bea[_0x32d4f2(0xa9)](_0x32d4f2(0x9f)))return;if(_0x11ced1[_0x32d4f2(0xda)][_0x32d4f2(0xd2)]||_0x11ced1[_0x32d4f2(0xda)][_0x32d4f2(0xac)])return;const _0x236ab6=config[_0x32d4f2(0xbe)][_0x144bea];if(!_0x236ab6)return;const _0xe774e0=_0x11ced1[_0x32d4f2(0xa7)][_0x32d4f2(0xb8)];if(!_0xe774e0||await isAdmin(_0x35c0db,_0x144bea,_0xe774e0))return;const _0x2229ca=_0xe774e0['split']('@')[0x0],_0x2f2a19=await enregistrerMessage(_0x144bea,_0xe774e0);_0x2f2a19===_0x236ab6[_0x32d4f2(0xa4)]-0x1&&(_0x236ab6[_0x32d4f2(0xc8)]!==![]?await send_text_message(_0x35c0db,_0x11ced1,'>\x20‚ö†Ô∏è\x20@'+_0x2229ca+_0x32d4f2(0xa8)+_0x2f2a19+_0x32d4f2(0xc3)+_0x236ab6[_0x32d4f2(0xa4)]+_0x32d4f2(0xbf)+_0x236ab6[_0x32d4f2(0xa3)]/0x3e8+'s)',_0x144bea,[_0xe774e0],![],!![]):await send_text_message(_0x35c0db,_0x11ced1));if(_0x2f2a19>=_0x236ab6[_0x32d4f2(0xa4)]){_0x236ab6['supprimerMessage']!==![]&&await delete_message(_0x35c0db,_0x11ced1,_0x144bea,_0x11ced1[_0x32d4f2(0xa7)])[_0x32d4f2(0xca)](()=>{});if(_0x236ab6['expulser']!==![])try{const _0x1a88b9=await _0x35c0db[_0x32d4f2(0xc5)](_0x144bea),_0x4c7e00=_0x1a88b9[_0x32d4f2(0xd0)]['some'](_0x140338=>_0x140338[_0x32d4f2(0xc6)]===_0xe774e0);_0x4c7e00?(await _0x35c0db['groupParticipantsUpdate'](_0x144bea,[_0xe774e0],_0x32d4f2(0xb5)),await send_text_message(_0x35c0db,_0x11ced1,_0x32d4f2(0xdf)+_0x2229ca+_0x32d4f2(0xb4),_0x144bea,[_0xe774e0],![],!![])):console[_0x32d4f2(0xb3)](_0x32d4f2(0xab)+_0xe774e0+_0x32d4f2(0xa6)+_0x144bea);}catch(_0x257a8d){console['error'](_0x32d4f2(0xa0),_0x257a8d);}await resetTentatives(_0x144bea,_0xe774e0);}}catch(_0x1f2102){console['error'](_0x32d4f2(0xa5),_0x1f2102);}};}export async function activerAntiSpam(_0x2f6dcc,_0x22a0a2,_0x3af9fa,_0x46eb95){const _0x4d5a81=a8_0x2c041f;if(!_0x46eb95)return await send_reaction_message(_0x2f6dcc,_0x22a0a2,_0x3af9fa,'‚ùå'),await send_text_message(_0x2f6dcc,_0x22a0a2,_0x4d5a81(0xb7),_0x3af9fa),![];const _0x46c49c=_0x22a0a2[_0x4d5a81(0xa7)][_0x4d5a81(0xb8)];if(!await isAdmin(_0x2f6dcc,_0x3af9fa,_0x46c49c))return await send_reaction_message(_0x2f6dcc,_0x22a0a2,_0x3af9fa,'‚ùå'),await send_text_message(_0x2f6dcc,_0x22a0a2,_0x4d5a81(0xc4),_0x3af9fa),![];if(!config['groupesActives'][_0x3af9fa])return config[_0x4d5a81(0xbe)][_0x3af9fa]={...config[_0x4d5a81(0xa1)]},await sauvegarderConfig(),await send_reaction_message(_0x2f6dcc,_0x22a0a2,_0x3af9fa,'‚úÖ'),await send_text_message(_0x2f6dcc,_0x22a0a2,_0x4d5a81(0xd9)+(_0x4d5a81(0xe2)+config['parametresGlobaux'][_0x4d5a81(0xa4)]+'\x0a')+('‚ñ∏\x20P√©riode:\x20'+config[_0x4d5a81(0xa1)][_0x4d5a81(0xa3)]/0x3e8+'s\x0a')+(_0x4d5a81(0xcf)+(config[_0x4d5a81(0xa1)][_0x4d5a81(0xa2)]?'‚úÖ':'‚ùå')+'\x0a')+('‚ñ∏\x20Avertissement:\x20'+(config[_0x4d5a81(0xa1)][_0x4d5a81(0xc8)]?'‚úÖ':'‚ùå')+'\x0a')+(_0x4d5a81(0xcb)+(config[_0x4d5a81(0xa1)][_0x4d5a81(0xcd)]?'‚úÖ':'‚ùå')),_0x3af9fa),!![];return await send_reaction_message(_0x2f6dcc,_0x22a0a2,_0x3af9fa,'‚ÑπÔ∏è'),await send_text_message(_0x2f6dcc,_0x22a0a2,_0x4d5a81(0xe3),_0x3af9fa),![];}export async function desactiverAntiSpam(_0x147a13,_0x1b328a,_0x1fb234,_0x42fe7d){const _0xb30a48=a8_0x2c041f;if(!_0x42fe7d)return await send_reaction_message(_0x147a13,_0x1b328a,_0x1fb234,'‚ùå'),await send_text_message(_0x147a13,_0x1b328a,_0xb30a48(0xb7),_0x1fb234),![];const _0x1d65ab=_0x1b328a[_0xb30a48(0xa7)][_0xb30a48(0xb8)];if(!await isAdmin(_0x147a13,_0x1fb234,_0x1d65ab))return await send_reaction_message(_0x147a13,_0x1b328a,_0x1fb234,'‚ùå'),await send_text_message(_0x147a13,_0x1b328a,_0xb30a48(0xc4),_0x1fb234),![];if(config[_0xb30a48(0xbe)][_0x1fb234])return delete config[_0xb30a48(0xbe)][_0x1fb234],await sauvegarderConfig(),await send_reaction_message(_0x147a13,_0x1b328a,_0x1fb234,'‚úÖ'),await send_text_message(_0x147a13,_0x1b328a,'>\x20üö´\x20AntiSpam\x20d√©sactiv√©',_0x1fb234),!![];return await send_reaction_message(_0x147a13,_0x1b328a,_0x1fb234,'‚ÑπÔ∏è'),await send_text_message(_0x147a13,_0x1b328a,'>\x20‚ÑπÔ∏è\x20Non\x20activ√©',_0x1fb234),![];}export async function listerGroupesAntiSpam(){const _0x10da3e=a8_0x2c041f;return Object[_0x10da3e(0xb1)](config[_0x10da3e(0xbe)])[_0x10da3e(0xd5)](_0x541452=>_0x541452[_0x10da3e(0xc1)]('@')[0x0])[_0x10da3e(0xe0)]('\x0a')||_0x10da3e(0xd8);}export async function configurerAntiSpam(_0x3c6682,_0x112180,_0x3f1f81,_0x165fb1){const _0x3848e3=a8_0x2c041f;if(!config[_0x3848e3(0xbe)][_0x3f1f81])return await send_reaction_message(_0x3c6682,_0x112180,_0x3f1f81,'‚ùå'),await send_text_message(_0x3c6682,_0x112180,_0x3848e3(0xd6),_0x3f1f81),![];return _0x165fb1[_0x3848e3(0xa4)]&&(config[_0x3848e3(0xbe)][_0x3f1f81][_0x3848e3(0xa4)]=parseInt(_0x165fb1[_0x3848e3(0xa4)])),_0x165fb1[_0x3848e3(0xa3)]&&(config[_0x3848e3(0xbe)][_0x3f1f81][_0x3848e3(0xa3)]=parseInt(_0x165fb1[_0x3848e3(0xa3)])*0x3e8),_0x165fb1[_0x3848e3(0xa2)]!==undefined&&(config[_0x3848e3(0xbe)][_0x3f1f81][_0x3848e3(0xa2)]=_0x165fb1[_0x3848e3(0xa2)]),_0x165fb1['avertir']!==undefined&&(config[_0x3848e3(0xbe)][_0x3f1f81]['avertir']=_0x165fb1[_0x3848e3(0xc8)]),_0x165fb1['expulser']!==undefined&&(config['groupesActives'][_0x3f1f81][_0x3848e3(0xcd)]=_0x165fb1['expulser']),await sauvegarderConfig(),await send_reaction_message(_0x3c6682,_0x112180,_0x3f1f81,'‚úÖ'),await send_text_message(_0x3c6682,_0x112180,_0x3848e3(0xbb),_0x3f1f81),!![];}