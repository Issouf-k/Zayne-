const a47_0x4f3483=a47_0x7330;(function(_0x5127f7,_0x55e8d5){const _0x22ee61=a47_0x7330,_0x330f86=_0x5127f7();while(!![]){try{const _0x431625=-parseInt(_0x22ee61(0x1e5))/0x1+parseInt(_0x22ee61(0x1d1))/0x2*(parseInt(_0x22ee61(0x1e4))/0x3)+parseInt(_0x22ee61(0x1cd))/0x4*(parseInt(_0x22ee61(0x1e2))/0x5)+parseInt(_0x22ee61(0x1d2))/0x6*(parseInt(_0x22ee61(0x1d7))/0x7)+parseInt(_0x22ee61(0x1d0))/0x8*(-parseInt(_0x22ee61(0x1ce))/0x9)+parseInt(_0x22ee61(0x1db))/0xa+-parseInt(_0x22ee61(0x1c5))/0xb;if(_0x431625===_0x55e8d5)break;else _0x330f86['push'](_0x330f86['shift']());}catch(_0x28145f){_0x330f86['push'](_0x330f86['shift']());}}}(a47_0x45ca,0x3e3ff));import{send_reaction_message,send_text_message,send_sticker_message}from'../utils/sendmessagewa.js';import{listerPremierFichierTemporaire,supprimerFichierCommencantPar}from'../utils/vu_unique.js';import{convertToStickerimage}from'../utils/convert_to_webp.js';import{convertToStickervideo}from'../utils/convert_to_webm.js';import a47_0x1a2802 from'../utils/download_media.js';import{join}from'path';import{unlink}from'fs/promises';import{existsSync}from'fs';import a47_0x1613fe from'dotenv';function a47_0x7330(_0x7ea81a,_0x1496ee){const _0x45ca57=a47_0x45ca();return a47_0x7330=function(_0x7330da,_0x3548e3){_0x7330da=_0x7330da-0x1c3;let _0x1ae3c4=_0x45ca57[_0x7330da];return _0x1ae3c4;},a47_0x7330(_0x7ea81a,_0x1496ee);}import{modifyLocalSticker}from'./take.js';a47_0x1613fe[a47_0x4f3483(0x1df)]();const MEDIA_PATH=process[a47_0x4f3483(0x1d9)][a47_0x4f3483(0x1cf)];function a47_0x45ca(){const _0x3cdcac=['config','key','contextInfo','219860SeTtvn','sendMessage','387kqBqvA','91838EzOwNc','Avertissement\x20lors\x20du\x20nettoyage:','error','message','pushName','Fichier\x20t√©l√©charg√©\x20introuvable','mark','6567429ewdSYb','√âchec\x20de\x20la\x20conversion\x20en\x20sticker','gif','chemin','tosticker','\x20ùëΩùë®ùëµùë∫ùë©ùë∂ùëª\x20À£·¥π·¥∞\x20·¥∫·¥±·µÇ\x20·¥≥·¥±·¥∫·¥±·¥ø·¥¨·µÄ·¥µ·¥º·¥∫','extendedTextMessage','type','28VcZQVm','207tfsoOK','MEDIA_PATH','76912aOkfkt','4766CwTsuI','126qpgEwl','video','warn','stanzaId','replace','34202nkQtte','Seules\x20les\x20images\x20et\x20vid√©os\x20peuvent\x20√™tre\x20transform√©es\x20en\x20stickers','env','.webp','4471570PpDZhZ','remoteJid','VANSBOT','quotedMessage'];a47_0x45ca=function(){return _0x3cdcac;};return a47_0x45ca();}export const transform_to_sticker=async(_0x3c7680,_0x574fed,_0x984ec,_0x37d900)=>{const _0x3ec8ca=a47_0x4f3483;let _0x53805c;_0x37d900[0x0]==_0x3ec8ca(0x1c4)?_0x53805c=!![]:_0x53805c=![];const _0x5ef290=_0x3ec8ca(0x1c9),_0xccb80=_0x53805c?_0x574fed[_0x3ec8ca(0x1e9)]||_0x3ec8ca(0x1dd):'';if(!_0x574fed[_0x3ec8ca(0x1e8)]?.[_0x3ec8ca(0x1cb)]?.[_0x3ec8ca(0x1e1)]?.[_0x3ec8ca(0x1de)])return await send_reaction_message(_0x3c7680,_0x574fed,_0x984ec,'‚ùå'),send_text_message(_0x3c7680,_0x574fed,'‚ö†Ô∏è\x20Veuillez\x20r√©pondre\x20√†\x20un\x20m√©dia\x20(image\x20ou\x20vid√©o)\x20pour\x20le\x20transformer\x20en\x20sticker',_0x984ec,undefined,!![],![],!![]);let _0x39fc07,_0x4806ce;try{await send_reaction_message(_0x3c7680,_0x574fed,_0x984ec,'üîÑ');const _0x38754e={'key':{'remoteJid':_0x574fed[_0x3ec8ca(0x1e0)][_0x3ec8ca(0x1dc)],'id':_0x574fed[_0x3ec8ca(0x1e8)][_0x3ec8ca(0x1cb)][_0x3ec8ca(0x1e1)][_0x3ec8ca(0x1d5)],'fromMe':![]},'message':_0x574fed[_0x3ec8ca(0x1e8)][_0x3ec8ca(0x1cb)][_0x3ec8ca(0x1e1)][_0x3ec8ca(0x1de)]},_0xa16ddd=_0x38754e[_0x3ec8ca(0x1e8)]?.['imageMessage'],_0x5d9279=_0x38754e[_0x3ec8ca(0x1e8)]?.['videoMessage'];if(!_0xa16ddd&&!_0x5d9279)throw new Error(_0x3ec8ca(0x1d8));const _0x3655db=await a47_0x1a2802(_0x3c7680,_0x38754e,_0x5ef290);if(!_0x3655db)throw new Error('√âchec\x20du\x20t√©l√©chargement\x20du\x20m√©dia');_0x39fc07=join(MEDIA_PATH,_0x3655db[_0x3ec8ca(0x1c8)]);if(!existsSync(_0x39fc07))throw new Error(_0x3ec8ca(0x1c3));_0x3655db[_0x3ec8ca(0x1cc)]===_0x3ec8ca(0x1d3)||_0x3655db[_0x3ec8ca(0x1cc)]===_0x3ec8ca(0x1c7)?(_0x4806ce=_0x39fc07[_0x3ec8ca(0x1d6)](/\.[^.]+$/,_0x3ec8ca(0x1da)),await convertToStickervideo(_0x39fc07,_0x4806ce)):(_0x4806ce=_0x39fc07[_0x3ec8ca(0x1d6)](/\.[^.]+$/,'.webp'),await convertToStickerimage(_0x39fc07,_0x4806ce,_0xccb80));if(!existsSync(_0x4806ce))throw new Error(_0x3ec8ca(0x1c6));const _0xbf2248=await modifyLocalSticker(_0x4806ce,_0x574fed['pushName'],_0x3ec8ca(0x1ca));await _0x3c7680[_0x3ec8ca(0x1e3)](_0x984ec,{'sticker':_0xbf2248}),await send_reaction_message(_0x3c7680,_0x574fed,_0x984ec,'‚úÖ');}catch(_0x1e2038){await send_reaction_message(_0x3c7680,_0x574fed,_0x984ec,'‚ùå'),console[_0x3ec8ca(0x1e7)]('Erreur\x20dans\x20transform_to_sticker:\x20'+_0x1e2038['message']);}finally{try{if(_0x39fc07&&existsSync(_0x39fc07))await unlink(_0x39fc07);if(_0x4806ce&&existsSync(_0x4806ce))await unlink(_0x4806ce);}catch(_0x25b968){console[_0x3ec8ca(0x1d4)](_0x3ec8ca(0x1e6),_0x25b968[_0x3ec8ca(0x1e8)]);}}};