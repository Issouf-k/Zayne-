const a33_0x35956e=a33_0x30ce;function a33_0x457c(){const _0x134ef4=['startQuizRounds','keys','Musique\x20ðŸŽµ','split','round','startGroupQuiz','getRandomQuestion','messages','ðŸ“\x20Question:\x20','selectedButtonId','toLowerCase','join','parseCategory','Madonna','substring','sort','trim','âœ…\x20RÃ©ponse:\x20','108078URFXdk','\x20secondes','TV\x20&\x20CinÃ©ma\x20ðŸŽ¬','players','20166BmHIdj','set','answer','374892ZtlAcM','parseAnswer','answers','MAX_PLAYERS','RÃ©pondez\x20avec\x20le\x20numÃ©ro\x20de\x20la\x20catÃ©gorie\x20(1,\x202,\x203,\x20etc.):','setupAnswerHandler','Sport\x20âš½','size','MAX_ROUNDS','add','RÃ©pondez\x20avec\x20la\x20lettre\x20correspondante\x20(A,\x20B,\x20C,\x20etc.)\x0a','ðŸ˜”\x20Personne\x20n\x27a\x20trouvÃ©\x20la\x20bonne\x20rÃ©ponse\x20!\x0a','formatAnswer','startTime','ðŸŽ¯\x20*RÃ‰PONSE\x20CORRECTE*\x0a\x0a','201GJkuFZ','endQuiz','showCorrectAnswer','\x20a\x20rejoint\x20le\x20quiz\x20!\x0a','âŒ\x20Le\x20quiz\x20a\x20dÃ©jÃ \x20commencÃ©\x20!','\x20points\x0a','category','quizzes','conversation','\x20\x20\x20Temps\x20moyen:\x20','fromCharCode','...','messages.upsert','cleanupSession','text','responseTime','1655919CGzEFo','off','âŒ\x20Pas\x20assez\x20de\x20joueurs\x20pour\x20dÃ©marrer\x20le\x20quiz\x20!','Tapez\x20*cancel*\x20pour\x20annuler\x20le\x20quiz.\x0a','\x20\x20\x20Score:\x20','has','question','146060YkCreb','https://quizzapi.jomoreschi.fr/api/v2/quiz?limit=20&category=','getPlayerName','remoteJid','ðŸŽ‰\x20*RÃ‰SULTATS\x20FINAUX*\x20ðŸŽ‰\x0a\x0a','Tapez\x20*join*\x20pour\x20participer\x20!\x0a','shuffleAnswers','ðŸŽ®\x20@','extendedTextMessage','N/A','25FiyJDD','Quiz\x20de\x20Groupe','â³\x20Le\x20temps\x20d\x27inscription\x20est\x20Ã©coulÃ©.\x20Le\x20quiz\x20va\x20commencer\x20!','name','855512UajpKy','James\x20Cameron','Quel\x20rÃ©alisateur\x20a\x20dirigÃ©\x20le\x20film\x20\x27Inception\x27?','sendMessage','ðŸ‘¥\x20Joueurs:\x20','scores','questions','entries','ROUND_DELAY','POINTS_CORRECT','ðŸŽ‰\x20*QUIZ\x20DE\x20GROUPE\x20DÃ‰MARRÃ‰*\x20ðŸŽ‰\x0a\x0a','@lid','map','joinQuiz','currentQuestion','s)\x0a','participant','getAnswerByIndex','Error\x20fetching\x20questions:','forEach','updateLeaderboard','POINTS_BONUS','Merci\x20Ã \x20tous\x20d\x27avoir\x20participÃ©\x20!\x20ðŸŽ®\x0a\x0aTapez\x20*new*\x20pour\x20lancer\x20un\x20nouveau\x20quiz.','Quel\x20artiste\x20a\x20sorti\x20l\x27album\x20\x27Thriller\x27?','Nettoyage\x20de\x20la\x20session\x20de\x20quiz\x20aprÃ¨s\x20inactivitÃ©.','Christopher\x20Nolan','floor','shuffledAnswers','3878xdCkCA','âŒ\x20Un\x20quiz\x20est\x20dÃ©jÃ \x20en\x20cours\x20dans\x20ce\x20groupe\x20!','push','Steven\x20Spielberg','log','\x20*\x20@','Quentin\x20Tarantino','buttonsResponseMessage','Culture\x20GÃ©nÃ©rale\x20ðŸ§ ','ðŸ†\x20Bonnes\x20rÃ©ponses:\x0a','jid','toFixed','âŒ\x20Le\x20quiz\x20est\x20complet\x20!','badAnswers','ðŸ”¢\x20Rounds:\x20','includes','usedQuestions','getFallbackQuestions','length','isActive','quizSessions','filter','cancel','get','showCategoryMenu','finalResults','score','Arts\x20&\x20LittÃ©rature\x20ðŸ“š','âŒ\x20Aucun\x20quiz\x20actif\x20dans\x20ce\x20groupe.','ðŸ“š\x20CatÃ©gorie:\x20','\x20secondes...','delete','Jeux\x20VidÃ©os\x20ðŸŽ®','isCorrect','7oNfBba','QUESTION_TIME','message','key','now','calculatePoints','fetchQuestionsFromAPI','random','â±ï¸\x20Temps:\x20','from','correctAnswers','loadQuestions','CatÃ©gorie:\x20','ActualitÃ©s\x20&\x20Politique\x20ðŸ“°','onWhatsApp','\x20\x20\x20Bonnes\x20rÃ©ponses:\x20'];a33_0x457c=function(){return _0x134ef4;};return a33_0x457c();}(function(_0x3830d1,_0x2f3aa2){const _0x484e64=a33_0x30ce,_0x444888=_0x3830d1();while(!![]){try{const _0x4cd4c3=parseInt(_0x484e64(0x11d))/0x1+-parseInt(_0x484e64(0xd9))/0x2*(parseInt(_0x484e64(0x133))/0x3)+parseInt(_0x484e64(0x124))/0x4+parseInt(_0x484e64(0x154))/0x5*(-parseInt(_0x484e64(0x121))/0x6)+parseInt(_0x484e64(0xfb))/0x7*(-parseInt(_0x484e64(0x158))/0x8)+parseInt(_0x484e64(0x143))/0x9+-parseInt(_0x484e64(0x14a))/0xa;if(_0x4cd4c3===_0x2f3aa2)break;else _0x444888['push'](_0x444888['shift']());}catch(_0x3704d4){_0x444888['push'](_0x444888['shift']());}}}(a33_0x457c,0x1cb19));import{send_reaction_message,send_text_message}from'../utils/sendmessagewa.js';import{getLidFromJid}from'../utils/getidparticipantgroupe.js';const QUIZ_CONFIG={'MAX_PLAYERS':0xa,'QUESTION_TIME':0x7530,'ROUND_DELAY':0x1388,'MAX_ROUNDS':0xa,'POINTS_CORRECT':0xa,'POINTS_BONUS':0x5},activeQuizzes=new Map(),quizCategories={'musique':a33_0x35956e(0x10d),'culture_generale':a33_0x35956e(0xe1),'art_litterature':a33_0x35956e(0xf4),'tv_cinema':a33_0x35956e(0x11f),'actu_politique':a33_0x35956e(0x108),'sport':a33_0x35956e(0x12a),'jeux_videos':a33_0x35956e(0xf9)};function a33_0x30ce(_0x558aaa,_0x4bd144){const _0x457c50=a33_0x457c();return a33_0x30ce=function(_0x30ceb7,_0x29fbeb){_0x30ceb7=_0x30ceb7-0xbf;let _0xeaae1d=_0x457c50[_0x30ceb7];return _0xeaae1d;},a33_0x30ce(_0x558aaa,_0x4bd144);}export class GroupQuiz{constructor(){const _0x84ce5f=a33_0x35956e;this[_0x84ce5f(0xed)]=new Map();}async[a33_0x35956e(0x110)](_0x45c8c5,_0x2a084b,_0xf5b74d){const _0x583bd6=a33_0x35956e;await send_reaction_message(_0x45c8c5,_0x2a084b,_0x2a084b[_0x583bd6(0xfe)][_0x583bd6(0x14d)],'ðŸŽ²');const _0x50714f=_0x2a084b[_0x583bd6(0xfe)]['remoteJid'],_0x13deef=_0x50714f+'_'+Date[_0x583bd6(0xff)]();if(activeQuizzes[_0x583bd6(0x148)](_0x50714f))return await send_text_message(_0x45c8c5,_0x2a084b,_0x583bd6(0xda),_0x50714f);let _0x226416=this[_0x583bd6(0x117)](_0xf5b74d[0x0]);if(!_0x226416){_0x226416=await this[_0x583bd6(0xf1)](_0x45c8c5,_0x50714f);if(!_0x226416)return;}const _0xecb451={'id':_0x13deef,'jid':_0x50714f,'category':_0x226416,'players':new Map(),'currentQuestion':null,'round':0x0,'scores':new Map(),'isActive':![],'leaderboard':[],'questions':[],'usedQuestions':new Set()};activeQuizzes[_0x583bd6(0x122)](_0x50714f,_0xecb451),this[_0x583bd6(0xed)]['set'](_0x13deef,_0xecb451),await _0x45c8c5[_0x583bd6(0xc0)](_0x50714f,{'text':_0x583bd6(0xc7)+(_0x583bd6(0xf6)+quizCategories[_0x226416]+'\x0a')+('ðŸ‘¥\x20Joueurs\x20max:\x20'+QUIZ_CONFIG[_0x583bd6(0x127)]+'\x0a')+(_0x583bd6(0xe7)+QUIZ_CONFIG['MAX_ROUNDS']+'\x0a\x0a')+_0x583bd6(0x14f)+_0x583bd6(0x146)+'Le\x20quiz\x20commence\x20dans\x2030\x20secondes...','footer':_0x583bd6(0x155)});let _0x284757;const _0x22b674=()=>{const _0xd33160=_0x583bd6;_0x45c8c5['ev'][_0xd33160(0x144)](_0xd33160(0x13f),_0x4ff50d);if(_0x284757)clearTimeout(_0x284757);},_0x4ff50d=async _0x3d7616=>{const _0x852636=_0x583bd6;for(const _0x234a92 of _0x3d7616[_0x852636(0x112)]){if(_0x234a92['key'][_0x852636(0x14d)]===_0x50714f){const _0x2f472a=_0x234a92[_0x852636(0xfd)]?.[_0x852636(0x13b)]||_0x234a92[_0x852636(0xfd)]?.[_0x852636(0x152)]?.['text'];if(_0x2f472a&&_0x2f472a[_0x852636(0x115)]()===_0x852636(0x116))await this['joinQuiz'](_0x45c8c5,_0x234a92);else{if(_0x2f472a&&_0x2f472a[_0x852636(0x115)]()===_0x852636(0xef)){_0x22b674(),await send_text_message(_0x45c8c5,_0x234a92,'âŒ\x20Le\x20quiz\x20a\x20Ã©tÃ©\x20annulÃ©.',_0x50714f),this[_0x852636(0x140)](_0x13deef),activeQuizzes['delete'](_0x50714f);return;}}}}};_0x45c8c5['ev']['on'](_0x583bd6(0x13f),_0x4ff50d),_0x284757=setTimeout(async()=>{const _0x2d55aa=_0x583bd6;_0x22b674(),await send_text_message(_0x45c8c5,_0x2a084b,_0x2d55aa(0x156),_0x50714f),activeQuizzes[_0x2d55aa(0x148)](_0x50714f)&&await this[_0x2d55aa(0x10b)](_0x45c8c5,_0xecb451);},0xea60);}async[a33_0x35956e(0xca)](_0x2f72cb,_0x434ae8){const _0x198bf1=a33_0x35956e,_0x242c31=_0x434ae8[_0x198bf1(0xfe)]['remoteJid'],_0x2b2045=_0x434ae8[_0x198bf1(0xfe)][_0x198bf1(0xcd)]||_0x434ae8[_0x198bf1(0xfe)]['remoteJid'],_0x2d4393=activeQuizzes[_0x198bf1(0xf0)](_0x242c31);if(!_0x2d4393)return await send_text_message(_0x2f72cb,_0x434ae8,_0x198bf1(0xf5),_0x242c31);if(_0x2d4393[_0x198bf1(0xec)])return await send_text_message(_0x2f72cb,_0x434ae8,_0x198bf1(0x137),_0x242c31);if(_0x2d4393[_0x198bf1(0x120)]['size']>=QUIZ_CONFIG[_0x198bf1(0x127)])return await send_text_message(_0x2f72cb,_0x434ae8,_0x198bf1(0xe5),_0x242c31);const _0x235c06=await this[_0x198bf1(0x14c)](_0x2f72cb,_0x2b2045,_0x242c31);!_0x2d4393[_0x198bf1(0x120)][_0x198bf1(0x148)](_0x2b2045)&&(_0x2d4393[_0x198bf1(0x120)][_0x198bf1(0x122)](_0x2b2045,{'id':_0x2b2045,'name':_0x235c06,'score':0x0,'correctAnswers':0x0,'responseTime':0x0}),_0x2d4393['scores'][_0x198bf1(0x122)](_0x2b2045,0x0),await send_text_message(_0x2f72cb,_0x434ae8,_0x198bf1(0x151)+_0x235c06+_0x198bf1(0x136)+(_0x198bf1(0xc1)+_0x2d4393['players'][_0x198bf1(0x12b)]+'/'+QUIZ_CONFIG[_0x198bf1(0x127)]),_0x242c31,[_0x235c06+_0x198bf1(0xc8)],![],![]),await send_reaction_message(_0x2f72cb,_0x434ae8,_0x242c31,'ðŸŽ®'));}async['startQuizRounds'](_0x5118db,_0x4cba88){const _0xd473d1=a33_0x35956e;if(_0x4cba88[_0xd473d1(0x120)][_0xd473d1(0x12b)]<0x2){await _0x5118db[_0xd473d1(0xc0)](_0x4cba88[_0xd473d1(0xe3)],{'text':_0xd473d1(0x145)}),this[_0xd473d1(0x134)](_0x4cba88['jid']);return;}_0x4cba88[_0xd473d1(0xec)]=!![],await this['loadQuestions'](_0x4cba88);for(let _0x1d908e=0x1;_0x1d908e<=QUIZ_CONFIG[_0xd473d1(0x12c)];_0x1d908e++){if(!_0x4cba88['isActive'])break;_0x4cba88['round']=_0x1d908e,await this['sendQuestion'](_0x5118db,_0x4cba88),await new Promise(_0x227adc=>setTimeout(_0x227adc,QUIZ_CONFIG['QUESTION_TIME'])),_0x4cba88[_0xd473d1(0xcb)]&&(await this[_0xd473d1(0x135)](_0x5118db,_0x4cba88),await this['updateLeaderboard'](_0x5118db,_0x4cba88),_0x1d908e<QUIZ_CONFIG[_0xd473d1(0x12c)]&&await new Promise(_0x25a9fe=>setTimeout(_0x25a9fe,QUIZ_CONFIG[_0xd473d1(0xc5)])));}await this[_0xd473d1(0xf2)](_0x5118db,_0x4cba88,_0x4cba88[_0xd473d1(0xe3)]),this[_0xd473d1(0x134)](_0x4cba88[_0xd473d1(0xe3)]);}async['sendQuestion'](_0x2cae7f,_0x3246b6){const _0x4c79e2=a33_0x35956e,_0x17a1ad=this[_0x4c79e2(0x111)](_0x3246b6);if(!_0x17a1ad){await _0x2cae7f['sendMessage'](_0x3246b6[_0x4c79e2(0xe3)],{'text':'âŒ\x20Plus\x20de\x20questions\x20disponibles\x20!'}),_0x3246b6['isActive']=![];return;}_0x3246b6[_0x4c79e2(0xcb)]={..._0x17a1ad,'startTime':Date['now'](),'answers':new Map()};const _0xcf0c9e=this[_0x4c79e2(0x150)]([_0x17a1ad[_0x4c79e2(0x123)],..._0x17a1ad[_0x4c79e2(0xe6)]]);_0x3246b6[_0x4c79e2(0xcb)][_0x4c79e2(0xd8)]=_0xcf0c9e;const _0x5e1aa7=_0xcf0c9e[_0x4c79e2(0xc9)]((_0x514ad5,_0x90c98d)=>String[_0x4c79e2(0x13d)](0x41+_0x90c98d)+'.\x20'+this[_0x4c79e2(0x130)](_0x514ad5))[_0x4c79e2(0x116)]('\x0a');await _0x2cae7f[_0x4c79e2(0xc0)](_0x3246b6[_0x4c79e2(0xe3)],{'text':'ðŸ””\x20*QUESTION\x20'+_0x3246b6[_0x4c79e2(0x10f)]+'/'+QUIZ_CONFIG[_0x4c79e2(0x12c)]+'*\x0a\x0a'+('ðŸ“\x20'+_0x17a1ad[_0x4c79e2(0x149)]+'\x0a\x0a')+(_0x5e1aa7+'\x0a\x0a')+_0x4c79e2(0x12e)+(_0x4c79e2(0x103)+QUIZ_CONFIG[_0x4c79e2(0xfc)]/0x3e8+_0x4c79e2(0x11e)),'footer':_0x4c79e2(0x107)+quizCategories[_0x3246b6[_0x4c79e2(0x139)]]}),this[_0x4c79e2(0x129)](_0x2cae7f,_0x3246b6);}['setupAnswerHandler'](_0x359cf4,_0x5b6e7f){const _0x1946d5=a33_0x35956e,_0x2d15ff=async _0x481188=>{const _0x5893fb=a33_0x30ce;for(const _0x4d75ae of _0x481188[_0x5893fb(0x112)]){if(_0x4d75ae[_0x5893fb(0xfe)]['remoteJid']===_0x5b6e7f[_0x5893fb(0xe3)]&&_0x5b6e7f[_0x5893fb(0xcb)]){const _0x392caa=_0x4d75ae[_0x5893fb(0xfe)][_0x5893fb(0xcd)]||_0x4d75ae['key'][_0x5893fb(0x14d)];if(_0x5b6e7f[_0x5893fb(0x120)]['has'](_0x392caa)&&!_0x5b6e7f['currentQuestion'][_0x5893fb(0x126)][_0x5893fb(0x148)](_0x392caa)){const _0xd14c94=this[_0x5893fb(0x125)](_0x4d75ae);if(_0xd14c94!==-0x1){const _0x35ffb4=this[_0x5893fb(0xce)](_0x5b6e7f[_0x5893fb(0xcb)],_0xd14c94),_0x2d40d7=_0x35ffb4===_0x5b6e7f[_0x5893fb(0xcb)]['answer'],_0x2b17ec=Date[_0x5893fb(0xff)]()-_0x5b6e7f['currentQuestion'][_0x5893fb(0x131)];_0x5b6e7f[_0x5893fb(0xcb)][_0x5893fb(0x126)][_0x5893fb(0x122)](_0x392caa,{'answer':_0x35ffb4,'isCorrect':_0x2d40d7,'responseTime':_0x2b17ec});if(_0x2d40d7){const _0x5369e7=this['calculatePoints'](_0x2b17ec),_0x4de1fd=_0x5b6e7f[_0x5893fb(0xc2)][_0x5893fb(0xf0)](_0x392caa)||0x0;_0x5b6e7f['scores']['set'](_0x392caa,_0x4de1fd+_0x5369e7);const _0x912950=_0x5b6e7f[_0x5893fb(0x120)][_0x5893fb(0xf0)](_0x392caa);_0x912950[_0x5893fb(0xf3)]+=_0x5369e7,_0x912950['correctAnswers']++,_0x912950[_0x5893fb(0x142)]+=_0x2b17ec,await send_reaction_message(_0x359cf4,_0x4d75ae,_0x5b6e7f[_0x5893fb(0xe3)],'âœ…');}else await send_reaction_message(_0x359cf4,_0x4d75ae,_0x5b6e7f['jid'],'âŒ');}}}}};_0x359cf4['ev']['on'](_0x1946d5(0x13f),_0x2d15ff),setTimeout(()=>{const _0x68ce26=_0x1946d5;_0x359cf4['ev'][_0x68ce26(0x144)]('messages.upsert',_0x2d15ff);},QUIZ_CONFIG[_0x1946d5(0xfc)]);}async[a33_0x35956e(0x135)](_0x27a24a,_0x233927){const _0x34966e=a33_0x35956e,_0x36fcf4=_0x233927[_0x34966e(0xcb)],_0x52cdf6=Array[_0x34966e(0x104)](_0x36fcf4[_0x34966e(0x126)][_0x34966e(0xc4)]())[_0x34966e(0xee)](([_0x5ac112,_0xb6d9be])=>_0xb6d9be[_0x34966e(0xfa)])[_0x34966e(0xc9)](([_0x27558c,_0x462916])=>({'player':_0x233927[_0x34966e(0x120)][_0x34966e(0xf0)](_0x27558c),'responseTime':_0x462916[_0x34966e(0x142)]}));let _0x4e3e6c=_0x34966e(0x132);_0x4e3e6c+=_0x34966e(0x113)+_0x36fcf4[_0x34966e(0x149)]+'\x0a',_0x4e3e6c+=_0x34966e(0x11c)+_0x36fcf4[_0x34966e(0x123)]+'\x0a\x0a';let _0x146230=[];_0x52cdf6[_0x34966e(0xeb)]>0x0?(_0x4e3e6c+=_0x34966e(0xe2),_0x52cdf6[_0x34966e(0xd0)](({player:_0xfc0a40,responseTime:_0xbfa66d},_0x43a04c)=>{const _0x134631=_0x34966e;_0x146230[_0x134631(0xdb)](_0xfc0a40[_0x134631(0x157)]+_0x134631(0xc8)),_0x4e3e6c+=_0x43a04c+0x1+'.\x20@'+_0xfc0a40[_0x134631(0x157)]+'\x20('+(_0xbfa66d/0x3e8)[_0x134631(0xe4)](0x1)+_0x134631(0xcc);})):_0x4e3e6c+=_0x34966e(0x12f),_0x4e3e6c+='\x0aðŸ“Š\x20Prochain\x20round\x20dans\x20'+QUIZ_CONFIG[_0x34966e(0xc5)]/0x3e8+_0x34966e(0xf7),await send_text_message(_0x27a24a,null,_0x4e3e6c,_0x233927[_0x34966e(0xe3)],_0x146230,![],![]);}async[a33_0x35956e(0xd1)](_0x35ccfa,_0x548ebe){const _0x521af5=a33_0x35956e,_0x4c2bda=Array['from'](_0x548ebe[_0x521af5(0xc2)]['entries']())[_0x521af5(0x11a)](([,_0x1333f9],[,_0x497093])=>_0x497093-_0x1333f9)['slice'](0x0,0x3);if(_0x4c2bda[_0x521af5(0xeb)]===0x0)return;let _0xae1105='ðŸ†\x20*CLASSEMENT\x20ACTUEL*\x0a\x0a',_0x4ce5a4=[];_0x4c2bda['forEach'](([_0x482ca8,_0x449410],_0x5c7b74)=>{const _0xccb57f=_0x521af5;_0x4ce5a4[_0xccb57f(0xdb)](_0x548ebe[_0xccb57f(0x120)][_0xccb57f(0xf0)](_0x482ca8)[_0xccb57f(0x157)]+_0xccb57f(0xc8));const _0x800adf=_0x548ebe[_0xccb57f(0x120)]['get'](_0x482ca8),_0x4f27fc=['ðŸ¥‡','ðŸ¥ˆ','ðŸ¥‰'];_0xae1105+=(_0x4f27fc[_0x5c7b74]||'ðŸ”¸')+'\x20@'+_0x800adf['name']+':\x20'+_0x449410+_0xccb57f(0x138);}),await send_text_message(_0x35ccfa,null,_0xae1105,_0x548ebe['jid'],_0x4ce5a4,![],![]);}async[a33_0x35956e(0xf2)](_0x3eb6d4,_0x573601,_0x3c36a6){const _0x2346c1=a33_0x35956e,_0x1cbc1b=Array[_0x2346c1(0x104)](_0x573601[_0x2346c1(0x120)]['values']())[_0x2346c1(0x11a)]((_0x5328c3,_0x1e0ac3)=>_0x1e0ac3['score']-_0x5328c3[_0x2346c1(0xf3)]);let _0x243eb7=_0x2346c1(0x14e),_0x3c7574=[];_0x1cbc1b['forEach']((_0x2ba75c,_0x1ec0ad)=>{const _0x194624=_0x2346c1;_0x3c7574[_0x194624(0xdb)](_0x2ba75c[_0x194624(0x157)]+_0x194624(0xc8));const _0x55f9de=['ðŸ¥‡','ðŸ¥ˆ','ðŸ¥‰'];_0x243eb7+=(_0x55f9de[_0x1ec0ad]||'ðŸ…')+_0x194624(0xde)+_0x2ba75c['name']+'*\x0a',_0x243eb7+=_0x194624(0x147)+_0x2ba75c[_0x194624(0xf3)]+'\x20points\x0a',_0x243eb7+=_0x194624(0x10a)+_0x2ba75c[_0x194624(0x105)]+'/'+_0x573601[_0x194624(0x10f)]+'\x0a',_0x243eb7+=_0x194624(0x13c)+(_0x2ba75c['correctAnswers']>0x0?(_0x2ba75c['responseTime']/_0x2ba75c[_0x194624(0x105)]/0x3e8)[_0x194624(0xe4)](0x1):_0x194624(0x153))+'s\x0a\x0a';}),_0x243eb7+=_0x2346c1(0xd3),await _0x3eb6d4[_0x2346c1(0xc0)](_0x573601['jid'],{'text':_0x243eb7,'mentions':_0x3c7574});let _0x2555cc;const _0x57bdca=()=>{const _0x5ad688=_0x2346c1;_0x3eb6d4['ev'][_0x5ad688(0x144)]('messages.upsert',_0x52fc80);if(_0x2555cc)clearTimeout(_0x2555cc);},_0x52fc80=async _0x7850a7=>{const _0x550db9=_0x2346c1;for(const _0x3c11c4 of _0x7850a7[_0x550db9(0x112)]){if(_0x3c11c4[_0x550db9(0xfe)][_0x550db9(0x14d)]===_0x3c36a6){const _0x129b80=_0x3c11c4[_0x550db9(0xfd)]?.['conversation']||_0x3c11c4[_0x550db9(0xfd)]?.[_0x550db9(0x152)]?.[_0x550db9(0x141)];if(_0x129b80&&_0x129b80[_0x550db9(0x115)]()==='new')return _0x57bdca(),await this['startGroupQuiz'](_0x3eb6d4,_0x3c11c4,[]);}}};_0x3eb6d4['ev']['on']('messages.upsert',_0x52fc80),_0x2555cc=setTimeout(async()=>{const _0x5cfd05=_0x2346c1;_0x57bdca(),console[_0x5cfd05(0xdd)](_0x5cfd05(0xd5));},0x7530);}[a33_0x35956e(0x117)](_0x4e57a8){const _0x52496e=a33_0x35956e;if(!_0x4e57a8)return null;const _0x40cbfa=_0x4e57a8[_0x52496e(0x115)]()['replace'](/[^a-z0-9]/g,'');for(const [_0x14895f,_0x2c54b7]of Object[_0x52496e(0xc4)](quizCategories)){if(_0x14895f[_0x52496e(0xe8)](_0x40cbfa)||_0x2c54b7[_0x52496e(0x115)]()[_0x52496e(0xe8)](_0x40cbfa))return _0x14895f;}return null;}async[a33_0x35956e(0xf1)](_0x2ae11,_0x50c346){const _0x1efc75=a33_0x35956e,_0x1f27c5=Object[_0x1efc75(0xc4)](quizCategories)[_0x1efc75(0xc9)](([_0x23d8f2,_0x5b6be9],_0xb3ce86)=>_0xb3ce86+0x1+'.\x20'+_0x5b6be9)[_0x1efc75(0x116)]('\x0a');return await _0x2ae11[_0x1efc75(0xc0)](_0x50c346,{'text':'ðŸŽ¯\x20*CHOISISSEZ\x20UNE\x20CATÃ‰GORIE*\x20ðŸŽ¯\x0a\x0a'+(_0x1f27c5+'\x0a\x0a')+_0x1efc75(0x128),'footer':_0x1efc75(0x155)}),new Promise(_0x4db8c8=>{const _0x9a62ed=async _0x518872=>{const _0x54466c=a33_0x30ce;for(const _0x4b1b6c of _0x518872[_0x54466c(0x112)]){if(_0x4b1b6c['key'][_0x54466c(0x14d)]===_0x50c346){const _0x497fab=_0x4b1b6c[_0x54466c(0xfd)]?.[_0x54466c(0x13b)]||_0x4b1b6c[_0x54466c(0xfd)]?.[_0x54466c(0x152)]?.[_0x54466c(0x141)];if(_0x497fab){const _0x5311b0=parseInt(_0x497fab[_0x54466c(0x11b)]());if(_0x5311b0>=0x1&&_0x5311b0<=Object[_0x54466c(0x10c)](quizCategories)[_0x54466c(0xeb)]){const _0x43880d=Object['keys'](quizCategories)[_0x5311b0-0x1];_0x2ae11['ev'][_0x54466c(0x144)]('messages.upsert',_0x9a62ed),_0x4db8c8(_0x43880d);}}}}};_0x2ae11['ev']['on']('messages.upsert',_0x9a62ed);});}[a33_0x35956e(0x150)](_0x171f5f){const _0x3a1b55=a33_0x35956e;return[..._0x171f5f][_0x3a1b55(0x11a)](()=>Math[_0x3a1b55(0x102)]()-0.5);}[a33_0x35956e(0x130)](_0x2b58ed,_0x410ddf=0x14){const _0x35fff2=a33_0x35956e;return _0x2b58ed[_0x35fff2(0xeb)]>_0x410ddf?_0x2b58ed[_0x35fff2(0x119)](0x0,_0x410ddf-0x3)+_0x35fff2(0x13e):_0x2b58ed;}[a33_0x35956e(0x100)](_0x51ff96){const _0x40f401=a33_0x35956e;let _0x301812=QUIZ_CONFIG[_0x40f401(0xc6)];if(_0x51ff96<0x2710)_0x301812+=QUIZ_CONFIG[_0x40f401(0xd2)];else{if(_0x51ff96<0x4e20)_0x301812+=Math[_0x40f401(0xd7)](QUIZ_CONFIG[_0x40f401(0xd2)]/0x2);}return _0x301812;}[a33_0x35956e(0x125)](_0x569d46){const _0x896815=a33_0x35956e;if(_0x569d46['message']?.[_0x896815(0xe0)]){const _0xef2f7a=_0x569d46['message'][_0x896815(0xe0)][_0x896815(0x114)],_0x587e9a=_0xef2f7a['match'](/answer_(\d+)/);return _0x587e9a?parseInt(_0x587e9a[0x1]):-0x1;}if(_0x569d46[_0x896815(0xfd)]?.[_0x896815(0x13b)]){const _0x170cb7=_0x569d46['message'][_0x896815(0x13b)]['toUpperCase']();if(_0x170cb7['length']===0x1&&_0x170cb7>='A'&&_0x170cb7<='Z')return _0x170cb7['charCodeAt'](0x0)-0x41;}return-0x1;}[a33_0x35956e(0xce)](_0x490359,_0xb4db7b){return _0x490359['shuffledAnswers'][_0xb4db7b];}async[a33_0x35956e(0x14c)](_0x8f76d4,_0x49275c,_0x5e3d66){const _0x17faf1=a33_0x35956e;try{const _0x355b13=await getLidFromJid(_0x8f76d4,_0x5e3d66,_0x49275c),[_0x57da70]=await _0x8f76d4[_0x17faf1(0x109)](_0x49275c);return _0x57da70?.['name']||''+_0x355b13[_0x17faf1(0x10e)]('@')[0x0];}catch{return _0x49275c[_0x17faf1(0x10e)]('@')[0x0];}}async[a33_0x35956e(0x106)](_0x114d9d){const _0x58b0ce=a33_0x35956e;_0x114d9d[_0x58b0ce(0xc3)]=await this[_0x58b0ce(0x101)](_0x114d9d[_0x58b0ce(0x139)]);}async[a33_0x35956e(0x101)](_0x3bb71f){const _0x500b9f=a33_0x35956e;try{const _0x19722f=await fetch(_0x500b9f(0x14b)+_0x3bb71f),_0x178291=await _0x19722f['json']();return _0x178291[_0x500b9f(0x13a)]||[];}catch(_0x32b402){return console['error'](_0x500b9f(0xcf),_0x32b402),this['getFallbackQuestions'](_0x3bb71f);}}[a33_0x35956e(0xea)](_0x113049){const _0x379b19=a33_0x35956e,_0x2473f6={'tv_cinema':[{'question':_0x379b19(0xbf),'answer':_0x379b19(0xd6),'badAnswers':[_0x379b19(0xdc),_0x379b19(0x159),_0x379b19(0xdf)]}],'musique':[{'question':_0x379b19(0xd4),'answer':'Michael\x20Jackson','badAnswers':['Prince',_0x379b19(0x118),'Whitney\x20Houston']}]};return _0x2473f6[_0x113049]||[];}[a33_0x35956e(0x111)](_0x5b85d8){const _0x3dc428=a33_0x35956e,_0x3f36fa=_0x5b85d8[_0x3dc428(0xc3)][_0x3dc428(0xee)](_0xc44b95=>!_0x5b85d8[_0x3dc428(0xe9)][_0x3dc428(0x148)](_0xc44b95[_0x3dc428(0x149)]));if(_0x3f36fa[_0x3dc428(0xeb)]===0x0)return null;const _0x3c9431=_0x3f36fa[Math[_0x3dc428(0xd7)](Math[_0x3dc428(0x102)]()*_0x3f36fa[_0x3dc428(0xeb)])];return _0x5b85d8['usedQuestions'][_0x3dc428(0x12d)](_0x3c9431[_0x3dc428(0x149)]),_0x3c9431;}[a33_0x35956e(0x134)](_0x1516bd){const _0x4e6227=a33_0x35956e,_0xe8fec5=activeQuizzes['get'](_0x1516bd);_0xe8fec5&&(this[_0x4e6227(0xed)][_0x4e6227(0xf8)](_0xe8fec5['id']),activeQuizzes['delete'](_0x1516bd));}[a33_0x35956e(0x140)](_0x3b963b){const _0x4da900=a33_0x35956e;this[_0x4da900(0xed)][_0x4da900(0xf8)](_0x3b963b);}}export const groupQuiz=new GroupQuiz();