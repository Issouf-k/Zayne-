const a23_0x52c799=a23_0x3e99;(function(_0x3d221b,_0x40ebc6){const _0xc7355f=a23_0x3e99,_0x38fced=_0x3d221b();while(!![]){try{const _0x2d3cbc=-parseInt(_0xc7355f(0x1d3))/0x1*(parseInt(_0xc7355f(0x1e0))/0x2)+-parseInt(_0xc7355f(0x1b8))/0x3*(parseInt(_0xc7355f(0x1ca))/0x4)+parseInt(_0xc7355f(0x1c6))/0x5*(-parseInt(_0xc7355f(0x1e1))/0x6)+-parseInt(_0xc7355f(0x1cd))/0x7+parseInt(_0xc7355f(0x1c0))/0x8+parseInt(_0xc7355f(0x1b2))/0x9*(parseInt(_0xc7355f(0x1b7))/0xa)+parseInt(_0xc7355f(0x1c9))/0xb;if(_0x2d3cbc===_0x40ebc6)break;else _0x38fced['push'](_0x38fced['shift']());}catch(_0xad87e){_0x38fced['push'](_0x38fced['shift']());}}}(a23_0x7cd2,0x871ef));import{promises as a23_0x11101a}from'fs';import a23_0x4a4f7a from'path';const CACHE_FILE=a23_0x4a4f7a['join'](process['cwd'](),a23_0x52c799(0x1d4)),fileLocks=new Map();async function acquireLock(_0x30ec7c){const _0x5bf484=a23_0x52c799;while(fileLocks[_0x5bf484(0x1c3)](_0x30ec7c)){await new Promise(_0x507d89=>setTimeout(_0x507d89,0xa));}return fileLocks[_0x5bf484(0x1b9)](_0x30ec7c,!![]),()=>fileLocks[_0x5bf484(0x1b3)](_0x30ec7c);}async function fileExists(_0x53c8cf){try{return await a23_0x11101a['access'](_0x53c8cf),!![];}catch{return![];}}async function readJsonFile(_0x36c1bf){const _0x207f18=a23_0x52c799;try{const _0x34cfa1=await a23_0x11101a['readFile'](_0x36c1bf,_0x207f18(0x1bd));return JSON[_0x207f18(0x1cb)](_0x34cfa1);}catch(_0x5aa81e){console[_0x207f18(0x1cf)]('Erreur\x20lors\x20de\x20la\x20lecture\x20du\x20fichier\x20'+_0x36c1bf+':',_0x5aa81e);throw new Error(_0x207f18(0x1d8)+_0x5aa81e['message']);}}function a23_0x3e99(_0x3caccd,_0x21d58e){const _0x7cd28=a23_0x7cd2();return a23_0x3e99=function(_0x3e99ba,_0x31b0dd){_0x3e99ba=_0x3e99ba-0x1b0;let _0x3edf1c=_0x7cd28[_0x3e99ba];return _0x3edf1c;},a23_0x3e99(_0x3caccd,_0x21d58e);}function a23_0x7cd2(){const _0x2e7c93=['jid','.tmp','message','356946TGvspH','commandes/json/group_admins_cache.json','promote','Ajout\x20admin\x20-\x20ID:','admins','Impossible\x20de\x20lire\x20le\x20fichier\x20JSON:\x20','✅\x20Cache\x20mis\x20à\x20jour\x20pour\x20le\x20groupe\x20','now','writeFile','length','find','action','groupMetadata','2fBZqyj','2166828xEgUvo','⚠️\x20Le\x20fichier\x20de\x20cache\x20n\x27existe\x20pas\x20!','⚠️\x20Structure\x20de\x20données\x20invalide:\x20propriété\x20\x27groups\x27\x20manquante','Erreur\x20lors\x20de\x20la\x20récupération\x20des\x20métadonnées:','unlink','126iyRrDj','delete','❌\x20Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20du\x20cache\x20des\x20administrateurs:','Erreur\x20lors\x20du\x20nettoyage\x20du\x20fichier\x20temporaire:','remove','271730IGjeTw','4857DNBkJj','set','filter','JID:',',\x20action:\x20','utf8','groups','demote','2566464OSGoGC','⚠️\x20Action\x20non\x20reconnue:\x20','ℹ️\x20Aucun\x20changement\x20nécessaire\x20pour\x20le\x20groupe\x20','has','log','includes','5EzVBUl','Action\x20\x27add\x27\x20détectée\x20pour\x20le\x20groupe\x20','push','11158334uuhJGX','548TnxrRi','parse','participants','1555974QTOKJN','Erreur\x20lors\x20de\x20l\x27écriture\x20du\x20fichier\x20','error'];a23_0x7cd2=function(){return _0x2e7c93;};return a23_0x7cd2();}async function writeJsonFile(_0x14f330,_0x51a710){const _0x3df3a2=a23_0x52c799;try{const _0x19478f=_0x14f330+'.tmp';await a23_0x11101a[_0x3df3a2(0x1db)](_0x19478f,JSON['stringify'](_0x51a710,null,0x2),'utf8'),await a23_0x11101a['rename'](_0x19478f,_0x14f330);}catch(_0x3341d1){console[_0x3df3a2(0x1cf)](_0x3df3a2(0x1ce)+_0x14f330+':',_0x3341d1);try{await a23_0x11101a[_0x3df3a2(0x1b1)](_0x14f330+_0x3df3a2(0x1d1));}catch(_0x515392){console[_0x3df3a2(0x1cf)](_0x3df3a2(0x1b5),_0x515392);}throw new Error('Impossible\x20d\x27écrire\x20dans\x20le\x20fichier\x20JSON:\x20'+_0x3341d1[_0x3df3a2(0x1d2)]);}}async function findJidByParticipantId(_0x2ade78,_0xe365b3,_0x15486e){const _0x299b3b=a23_0x52c799;try{const _0x2552a9=await _0x2ade78[_0x299b3b(0x1df)](_0xe365b3),_0x3b24b9=_0x2552a9[_0x299b3b(0x1cc)]['find'](_0xd04c54=>_0xd04c54['id']===_0x15486e);return _0x3b24b9?_0x3b24b9[_0x299b3b(0x1d0)]:null;}catch(_0x3bb307){return console[_0x299b3b(0x1cf)](_0x299b3b(0x1b0),_0x3bb307),null;}}export async function updateGroupAdmins(_0x5cbb07,_0x24cdf3,_0x287b37=CACHE_FILE){const _0x3b288f=a23_0x52c799;let _0x2f282f=null;try{if(!await fileExists(_0x287b37))return console[_0x3b288f(0x1c4)](_0x3b288f(0x1e2)),null;_0x2f282f=await acquireLock(_0x287b37);const _0x55315b=await readJsonFile(_0x287b37);if(!_0x55315b[_0x3b288f(0x1be)])return console['warn'](_0x3b288f(0x1e3)),null;const _0x2dcffd=_0x24cdf3['id'],_0x104557=_0x24cdf3[_0x3b288f(0x1cc)]||[],_0x3352ca=_0x24cdf3[_0x3b288f(0x1de)];if(!_0x55315b[_0x3b288f(0x1be)][_0x2dcffd])return null;const _0x4fded1=_0x55315b[_0x3b288f(0x1be)][_0x2dcffd];_0x4fded1['lastUpdate']=Date[_0x3b288f(0x1da)]();let _0x1c686d=![];switch(_0x3352ca){case _0x3b288f(0x1d5):for(const _0x4cf7aa of _0x104557){const _0x5bb83b=_0x4fded1[_0x3b288f(0x1d7)][_0x3b288f(0x1dd)](_0x4c3117=>_0x4c3117['id']===_0x4cf7aa);if(!_0x5bb83b){const _0x5aa1b1=await findJidByParticipantId(_0x5cbb07,_0x2dcffd,_0x4cf7aa);console[_0x3b288f(0x1c4)](_0x3b288f(0x1d6),_0x4cf7aa,_0x3b288f(0x1bb),_0x5aa1b1),_0x4fded1[_0x3b288f(0x1d7)][_0x3b288f(0x1c8)]({'id':_0x4cf7aa,'jid':_0x5aa1b1}),_0x1c686d=!![];}}break;case _0x3b288f(0x1bf):case _0x3b288f(0x1b6):const _0x57df4e=_0x4fded1['admins'][_0x3b288f(0x1dc)];_0x4fded1['admins']=_0x4fded1[_0x3b288f(0x1d7)][_0x3b288f(0x1ba)](_0x4f69fe=>!_0x104557[_0x3b288f(0x1c5)](_0x4f69fe['id'])),_0x1c686d=_0x4fded1['admins'][_0x3b288f(0x1dc)]!==_0x57df4e;break;case'add':console[_0x3b288f(0x1c4)](_0x3b288f(0x1c7)+_0x2dcffd);break;default:console['warn'](_0x3b288f(0x1c1)+_0x3352ca);}return _0x1c686d?(await writeJsonFile(_0x287b37,_0x55315b),console[_0x3b288f(0x1c4)](_0x3b288f(0x1d9)+_0x2dcffd+_0x3b288f(0x1bc)+_0x3352ca)):console[_0x3b288f(0x1c4)](_0x3b288f(0x1c2)+_0x2dcffd+_0x3b288f(0x1bc)+_0x3352ca),_0x55315b;}catch(_0x50376d){console['error'](_0x3b288f(0x1b4),_0x50376d);throw _0x50376d;}finally{_0x2f282f&&_0x2f282f();}}