const a1_0x46790d=a1_0x4f33;(function(_0x48df86,_0x5ae1b7){const _0x3139cd=a1_0x4f33,_0x373eea=_0x48df86();while(!![]){try{const _0x3109c7=parseInt(_0x3139cd(0x202))/0x1*(parseInt(_0x3139cd(0x1fe))/0x2)+-parseInt(_0x3139cd(0x1e2))/0x3*(-parseInt(_0x3139cd(0x207))/0x4)+parseInt(_0x3139cd(0x1cc))/0x5*(-parseInt(_0x3139cd(0x1d0))/0x6)+-parseInt(_0x3139cd(0x1e4))/0x7+parseInt(_0x3139cd(0x1e1))/0x8+parseInt(_0x3139cd(0x1f8))/0x9+parseInt(_0x3139cd(0x1ed))/0xa*(parseInt(_0x3139cd(0x1fa))/0xb);if(_0x3109c7===_0x5ae1b7)break;else _0x373eea['push'](_0x373eea['shift']());}catch(_0x2b28cb){_0x373eea['push'](_0x373eea['shift']());}}}(a1_0x433e,0x2fffa));import a1_0x3c8e2f from'fs/promises';import a1_0x4677e2 from'path';import{fileURLToPath}from'url';import{send_text_message,send_image_message,send_video_message,send_audio_message,send_sticker_message,send_gif_message}from'../utils/sendmessagewa.js';import{isAdmin}from'../utils/gestion_groupe.js';import{jidNormalizedUser}from'baileys';const __dirname=a1_0x4677e2[a1_0x46790d(0x1f0)](fileURLToPath(import.meta[a1_0x46790d(0x20a)])),ANTIDELETE_FILE=a1_0x4677e2[a1_0x46790d(0x1e0)](__dirname,a1_0x46790d(0x1fd)),MESSAGES_FILE=a1_0x4677e2[a1_0x46790d(0x1e0)](__dirname,'json/messages.json');let global=![];const defaultConfig={'groupesActives':{},'parametresGlobaux':{'activer':!![],'maxMessages':0x3e8}};let config={...defaultConfig};const messageStores=new Map();async function chargerConfig(){const _0x5719a9=a1_0x46790d;try{await a1_0x3c8e2f[_0x5719a9(0x1cf)](a1_0x4677e2[_0x5719a9(0x1f0)](ANTIDELETE_FILE),{'recursive':!![]}),await a1_0x3c8e2f['access'](ANTIDELETE_FILE);const _0x155d08=await a1_0x3c8e2f['readFile'](ANTIDELETE_FILE,'utf-8');return{...defaultConfig,...JSON[_0x5719a9(0x20c)](_0x155d08)};}catch(_0x46a5d9){return _0x46a5d9['code']!=='ENOENT'&&console['error'](_0x5719a9(0x1f3),_0x46a5d9),{...defaultConfig};}}async function sauvegarderConfig(){const _0x203af2=a1_0x46790d;try{await a1_0x3c8e2f[_0x203af2(0x1f4)](ANTIDELETE_FILE,JSON[_0x203af2(0x208)](config,null,0x2),_0x203af2(0x1de));}catch(_0x4caaf1){console[_0x203af2(0x1f6)]('[AntiDelete]\x20Erreur\x20sauvegarde\x20config:',_0x4caaf1);}}function a1_0x4f33(_0x230c83,_0x1b8490){const _0x433ea1=a1_0x433e();return a1_0x4f33=function(_0x4f330a,_0xe1ccb3){_0x4f330a=_0x4f330a-0x1cb;let _0x2161a2=_0x433ea1[_0x4f330a];return _0x2161a2;},a1_0x4f33(_0x230c83,_0x1b8490);}async function chargerMessages(){const _0x505ac2=a1_0x46790d;try{await a1_0x3c8e2f[_0x505ac2(0x1cf)](a1_0x4677e2[_0x505ac2(0x1f0)](MESSAGES_FILE),{'recursive':!![]}),await a1_0x3c8e2f['access'](MESSAGES_FILE);const _0xe1951=await a1_0x3c8e2f[_0x505ac2(0x1dd)](MESSAGES_FILE,_0x505ac2(0x1de)),_0x426d7b=JSON[_0x505ac2(0x20c)](_0xe1951);for(const [_0x2a0520,_0x18a814]of Object[_0x505ac2(0x1e7)](_0x426d7b)){const _0x56dad7=new Map();for(const [_0x542e90,_0x236e08]of Object[_0x505ac2(0x1e7)](_0x18a814)){_0x56dad7[_0x505ac2(0x1ce)](_0x542e90,_0x236e08);}messageStores[_0x505ac2(0x1ce)](_0x2a0520,_0x56dad7);}}catch(_0x1ee448){_0x1ee448[_0x505ac2(0x1d2)]!==_0x505ac2(0x209)&&console[_0x505ac2(0x1f6)](_0x505ac2(0x1e5),_0x1ee448);}}async function sauvegarderMessages(){const _0x4109cc=a1_0x46790d;try{const _0x4d3b1a={};for(const [_0x299dc9,_0x302573]of messageStores){_0x4d3b1a[_0x299dc9]={};for(const [_0x4f9ac3,_0x21a448]of _0x302573){_0x4d3b1a[_0x299dc9][_0x4f9ac3]=_0x21a448;}}await a1_0x3c8e2f[_0x4109cc(0x1f4)](MESSAGES_FILE,JSON[_0x4109cc(0x208)](_0x4d3b1a,null,0x2),_0x4109cc(0x1de));}catch(_0x5537bf){console[_0x4109cc(0x1f6)]('[AntiDelete]\x20Erreur\x20sauvegarde\x20messages:',_0x5537bf);}}((async()=>{config=await chargerConfig(),await chargerMessages();})());function getMessageStore(_0x50bb29){const _0x559b96=a1_0x46790d;return!messageStores['has'](_0x50bb29)&&messageStores[_0x559b96(0x1ce)](_0x50bb29,new Map()),messageStores[_0x559b96(0x1eb)](_0x50bb29);}function storeMessage(_0x16dcf6,_0x2de24e){const _0x449f46=a1_0x46790d,_0xc53d3f=_0x2de24e[_0x449f46(0x1d8)];if(!_0xc53d3f||_0xc53d3f[_0x449f46(0x1ec)])return;const _0x57aa6f=getMessageStore(_0x16dcf6),_0x295525=_0x2de24e['key']?.['id'];if(_0x57aa6f[_0x449f46(0x1cd)]>=(config[_0x449f46(0x1e8)][_0x449f46(0x1fc)]||0x3e8)){const _0x54adf6=_0x57aa6f[_0x449f46(0x20b)]()[_0x449f46(0x206)]()[_0x449f46(0x1ff)];_0x57aa6f[_0x449f46(0x1d7)](_0x54adf6);}_0x57aa6f[_0x449f46(0x1ce)](_0x295525,_0x2de24e),sauvegarderMessages();}function getStoredMessage(_0x1ec3f,_0x6bf3f4){const _0xc05caa=getMessageStore(_0x1ec3f),_0x171cb7=_0x6bf3f4['id'];return _0xc05caa['get'](_0x171cb7);}export function creerAntiDeleteBaileys(_0x2521f0,_0x28435f){return async()=>{const _0x5a3753=a1_0x4f33;try{for(const _0x47ec08 of _0x28435f){const _0x10b0e2=_0x47ec08[_0x5a3753(0x201)][_0x5a3753(0x1db)];if(!config[_0x5a3753(0x1d1)][_0x10b0e2]&&!global)continue;const _0x7e9326=_0x47ec08?.[_0x5a3753(0x1d8)]?.[_0x5a3753(0x1ec)]?.[_0x5a3753(0x1f2)];if(_0x7e9326==='REVOKE'||_0x7e9326===0x0){const _0x45381f=_0x47ec08[_0x5a3753(0x1d8)][_0x5a3753(0x1ec)]['key'],_0x299a9f=getStoredMessage(_0x10b0e2,_0x45381f);_0x299a9f&&await handleDeletedMessage(_0x2521f0,_0x47ec08,_0x299a9f,_0x10b0e2);}else _0x47ec08[_0x5a3753(0x1d8)]&&!_0x47ec08[_0x5a3753(0x1d8)][_0x5a3753(0x1ec)]&&storeMessage(_0x10b0e2,_0x47ec08);}}catch(_0x12b37b){console['error'](_0x5a3753(0x1f1),_0x12b37b);}};}async function handleDeletedMessage(_0x1eee67,_0x3e8826,_0x152d23,_0x292c52){const _0x3d07db=a1_0x46790d;try{const _0x332d6a=jidNormalizedUser(await _0x1eee67[_0x3d07db(0x1df)]['id']);await resendDeletedMessage(_0x1eee67,_0x3e8826,_0x152d23,_0x332d6a);}catch(_0x55f773){console[_0x3d07db(0x1f6)](_0x3d07db(0x1d5),_0x55f773);}}function a1_0x433e(){const _0x4f1856=['url','keys','parse','caption','\x0aðŸ–¼ï¸\x20Image\x20supprimÃ©e','1655CPoHFg','size','set','mkdir','2676OvvXvT','groupesActives','code','>\x20â„¹ï¸\x20DÃ©jÃ \x20activÃ©','Inconnu','[AntiDelete]\x20Erreur\x20gestion\x20message\x20supprimÃ©:','ðŸ“„\x20Message\x20supprimÃ©\x20(type\x20non\x20supportÃ©)','delete','message','split','text','remoteJid','stickerMessage','readFile','utf-8','user','join','927736hGrMtU','9etEwDM','participant','2235604RtRzZl','[AntiDelete]\x20Erreur\x20chargement\x20messages:','imageMessage','entries','parametresGlobaux','â–¸\x20Stockage:\x20','conversation','get','protocolMessage','50ZxsWZV','>\x20ðŸ—‘ï¸\x20Message\x20supprimÃ©\x20par\x20@','Aucun\x20groupe','dirname','[AntiDelete]\x20Erreur:','type','[AntiDelete]\x20Erreur\x20chargement\x20config:','writeFile','audioMessage','error','map','1235826DUclHe','extendedTextMessage','687214AkGlKJ','videoMessage','maxMessages','json/antidelete.json','51892mgpAjQ','value','pushName','key','1VNFWEI','>\x20ðŸ—‘ï¸\x20AntiDelete\x20activÃ©\x0a','>\x20ðŸ—‘ï¸\x20AntiDelete\x20dÃ©sactivÃ©','\x0aðŸ“\x20','next','96004fEVoqy','stringify','ENOENT'];a1_0x433e=function(){return _0x4f1856;};return a1_0x433e();}async function resendDeletedMessage(_0x46d118,_0x3bc199,_0x430328,_0x3de77a){const _0x2ad0a5=a1_0x46790d,_0x7d31a0=_0x3bc199[_0x2ad0a5(0x201)]['participant'],_0x1c72ef=_0x7d31a0?_0x7d31a0[_0x2ad0a5(0x1d9)]('@')[0x0]:_0x3bc199[_0x2ad0a5(0x200)]||_0x2ad0a5(0x1d4);try{const _0x1f3cec=_0x430328[_0x2ad0a5(0x1d8)];if(_0x1f3cec[_0x2ad0a5(0x1ea)]||_0x1f3cec['extendedTextMessage']?.[_0x2ad0a5(0x1da)]){const _0x43617c=_0x1f3cec[_0x2ad0a5(0x1ea)]||_0x1f3cec[_0x2ad0a5(0x1f9)]?.[_0x2ad0a5(0x1da)];await send_text_message(_0x46d118,_0x3bc199,_0x2ad0a5(0x1ee)+_0x1c72ef+_0x2ad0a5(0x205)+_0x43617c,_0x3de77a,[],![],!![],![]);}else{if(_0x1f3cec[_0x2ad0a5(0x1e6)]){const _0x32bc01=_0x1f3cec['imageMessage'][_0x2ad0a5(0x20d)]||'';await send_text_message(_0x46d118,_0x3bc199,_0x2ad0a5(0x1ee)+_0x1c72ef+_0x2ad0a5(0x1cb)+(_0x32bc01?':\x20'+_0x32bc01:''),_0x3de77a,[],![],!![],![]);}else{if(_0x1f3cec[_0x2ad0a5(0x1fb)]){const _0xb9513=_0x1f3cec['videoMessage'][_0x2ad0a5(0x20d)]||'';await send_text_message(_0x46d118,_0x3bc199,_0x2ad0a5(0x1ee)+_0x1c72ef+'\x0aðŸŽ¥\x20VidÃ©o\x20supprimÃ©e'+(_0xb9513?':\x20'+_0xb9513:''),_0x3de77a,[],![],!![],![]);}else{if(_0x1f3cec[_0x2ad0a5(0x1f5)])await send_text_message(_0x46d118,_0x3bc199,'>\x20ðŸ—‘ï¸\x20Message\x20supprimÃ©\x20par\x20@'+_0x1c72ef+'\x0aðŸŽµ\x20Audio\x20supprimÃ©',_0x3de77a,[],![],!![],![]);else _0x1f3cec[_0x2ad0a5(0x1dc)]?await send_text_message(_0x46d118,_0x3bc199,_0x2ad0a5(0x1ee)+_0x1c72ef+'\x0aðŸŽ­\x20Sticker\x20supprimÃ©',_0x3de77a,[],![],!![],![]):await send_text_message(_0x46d118,_0x3bc199,_0x2ad0a5(0x1d6),_0x3de77a,[],![],!![],![]);}}}}catch(_0x48be21){console[_0x2ad0a5(0x1f6)]('[AntiDelete]\x20Erreur\x20renvoi\x20message:',_0x48be21);}}export async function ajouterGroupeAntiDelete(_0x106042,_0x3747da,_0x15fffb,_0xcea356,_0x279e2b){const _0x1150a9=a1_0x46790d,_0xe3fcd4=_0x3747da[_0x1150a9(0x201)][_0x1150a9(0x1e3)];global=_0x279e2b;if(!config[_0x1150a9(0x1d1)][_0x15fffb])return config[_0x1150a9(0x1d1)][_0x15fffb]={...config['parametresGlobaux']},await sauvegarderConfig(),await send_text_message(_0x106042,_0x3747da,_0x1150a9(0x203)+(_0x1150a9(0x1e9)+config[_0x1150a9(0x1e8)][_0x1150a9(0x1fc)]+'\x20messages\x20max'),_0x15fffb),!![];return await send_text_message(_0x106042,_0x3747da,_0x1150a9(0x1d3),_0x15fffb),![];}export async function supprimerGroupeAntiDelete(_0x2028f4,_0xd98cff,_0x286080,_0x5ec8a5){const _0x4aa19f=a1_0x46790d,_0x17fb92=_0xd98cff[_0x4aa19f(0x201)][_0x4aa19f(0x1e3)];global=![];if(config[_0x4aa19f(0x1d1)][_0x286080])return delete config[_0x4aa19f(0x1d1)][_0x286080],messageStores['delete'](_0x286080),await sauvegarderConfig(),await sauvegarderMessages(),await send_text_message(_0x2028f4,_0xd98cff,_0x4aa19f(0x204),_0x286080),!![];return await send_text_message(_0x2028f4,_0xd98cff,'>\x20â„¹ï¸\x20Non\x20activÃ©',_0x286080),![];}export async function listerGroupesAntiDelete(){const _0x4b838f=a1_0x46790d;return Object[_0x4b838f(0x20b)](config[_0x4b838f(0x1d1)])[_0x4b838f(0x1f7)](_0xf23647=>_0xf23647[_0x4b838f(0x1d9)]('@')[0x0])[_0x4b838f(0x1e0)]('\x0a')||_0x4b838f(0x1ef);}