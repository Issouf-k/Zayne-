const a31_0x5cd8d2=a31_0x3c9f;(function(_0x7ccfd0,_0x1865b9){const _0x24ab5f=a31_0x3c9f,_0xd783a5=_0x7ccfd0();while(!![]){try{const _0xc0f723=-parseInt(_0x24ab5f(0x203))/0x1*(-parseInt(_0x24ab5f(0x1fd))/0x2)+-parseInt(_0x24ab5f(0x1d3))/0x3*(parseInt(_0x24ab5f(0x1e4))/0x4)+parseInt(_0x24ab5f(0x1f7))/0x5*(parseInt(_0x24ab5f(0x1ee))/0x6)+-parseInt(_0x24ab5f(0x1e1))/0x7*(-parseInt(_0x24ab5f(0x1d4))/0x8)+parseInt(_0x24ab5f(0x1f6))/0x9+-parseInt(_0x24ab5f(0x1d1))/0xa*(parseInt(_0x24ab5f(0x1f1))/0xb)+-parseInt(_0x24ab5f(0x201))/0xc;if(_0xc0f723===_0x1865b9)break;else _0xd783a5['push'](_0xd783a5['shift']());}catch(_0x11b679){_0xd783a5['push'](_0xd783a5['shift']());}}}(a31_0x539f,0x1a2ca));import a31_0x5b3422 from'yt-search';import a31_0x39d85c from'node-fetch';import{send_reaction_message,send_text_message}from'../utils/sendmessagewa.js';function a31_0x539f(){const _0x50180c=['trim','substring','stringify','video/mp4','https://apis.davidcyriltech.my.id/youtube','key','ðŸŽµ\x20RÃ©sultats\x20pour:\x20','result','creator','log','âŒ\x20Titre\x20trop\x20long\x20(max\x20','âŒ\x20Veuillez\x20fournir\x20un\x20titre\x20de\x20vidÃ©o.','530wzsRQF','\x0aRÃ©pondez\x20avec\x20le\x20numÃ©ro\x20(1-','3EchxTA','123208FomoDn','Error\x20fetching\x20thumbnail:','cancel','url','API\x20request\x20failed\x20with\x20status\x20','downloadUrl','abort','Invalid\x20video\x20response\x20format','Invalid\x20audio\x20response\x20format','signal',')\x20ou\x20\x22annuler\x22\x20pour\x20annuler.','API\x20response:','json','91UaZmdW','mp3','conversation','72812hlpnhk','videos','>\x20âŒ\x20Annulation\x20de\x20la\x20recherche\x20ou\x20temps\x20d\x27attente\x20expirÃ©.','length','?url=','image','remoteJid','off','audio','\x0aChoisissez\x20une\x20vidÃ©o\x20en\x20rÃ©pondant\x20avec\x20le\x20numÃ©ro:\x0a\x0a','90TQLVWp','thumbnail','error','17457CjEkrw','success','ptt','from','audio/mpeg','1122327POzKxZ','47370vSGaRU','message','status','arrayBuffer','messages','slice','1040adHDGg','join','\x20caractÃ¨res).','Invalid\x20media\x20data:','3576744yMjttf','messages.upsert','78tbuChg','selectedButtonId','>\x20âš ï¸\x20contenu\x20introuvable,\x20veuillez\x20essayer\x20de\x20nouveau\x20plutard\x20','title','forEach','âŒ\x20Aucune\x20vidÃ©o\x20trouvÃ©e.','âŒ\x20Une\x20erreur\x20est\x20survenue.'];a31_0x539f=function(){return _0x50180c;};return a31_0x539f();}const API_BASE_URL=a31_0x5cd8d2(0x20e),DEFAULT_TIMEOUT=0xea60,MAX_TITLE_LENGTH=0x32,MAX_RESULTS=0x5;export async function sendYtMusic(_0x3b5137,_0x510185,_0x1cc0af,_0x2bd4af){const _0x427478=a31_0x5cd8d2,{key:_0x6e6c8f}=_0x510185,_0x20ed08=_0x6e6c8f[_0x427478(0x1ea)];try{if(!_0x1cc0af[_0x427478(0x1e7)])return await send_text_message(_0x3b5137,_0x510185,_0x427478(0x1d0),_0x20ed08);const _0x363546=_0x1cc0af[_0x427478(0x1fe)]('\x20')[_0x427478(0x20a)]();if(_0x363546['length']>MAX_TITLE_LENGTH)return await send_text_message(_0x3b5137,_0x510185,_0x427478(0x1cf)+MAX_TITLE_LENGTH+_0x427478(0x1ff),_0x20ed08);await send_reaction_message(_0x3b5137,_0x510185,_0x20ed08,'ðŸ”');const _0x46d79b=await a31_0x5b3422(_0x363546),_0x14f8ea=_0x46d79b[_0x427478(0x1e5)][_0x427478(0x1fc)](0x0,MAX_RESULTS);if(!_0x14f8ea[_0x427478(0x1e7)])return await send_text_message(_0x3b5137,_0x510185,_0x427478(0x208),_0x20ed08);let _0x3f88e0=_0x427478(0x210)+_0x363546+_0x427478(0x1ed);_0x14f8ea[_0x427478(0x207)]((_0x3a06a8,_0x2a7e14)=>{const _0x5acc05=_0x427478;_0x3f88e0+=_0x2a7e14+0x1+'.\x20'+formatTitle(_0x3a06a8[_0x5acc05(0x206)],0x1e)+'\x0a';}),_0x3f88e0+=_0x427478(0x1d2)+_0x14f8ea[_0x427478(0x1e7)]+_0x427478(0x1de),await send_text_message(_0x3b5137,_0x510185,_0x3f88e0,_0x20ed08);const _0x168505=await waitForUserChoice(_0x3b5137,_0x20ed08,_0x14f8ea);if(!_0x168505)return await send_text_message(_0x3b5137,_0x510185,_0x427478(0x1e6),_0x20ed08);await send_reaction_message(_0x3b5137,_0x510185,_0x20ed08,'ðŸ“¥');const _0x46d869=_0x2bd4af==='video'?'mp4':_0x427478(0x1e2),_0x44d5c0=API_BASE_URL+'/'+_0x46d869+_0x427478(0x1e8)+_0x168505[_0x427478(0x1d7)],_0x2b5007=await fetchMediaData(_0x44d5c0,_0x2bd4af);if(!_0x2b5007?.[_0x427478(0x211)]?.[_0x427478(0x1d7)])return console[_0x427478(0x1f0)](_0x427478(0x200),_0x2b5007),await send_text_message(_0x3b5137,_0x510185,_0x427478(0x205),_0x20ed08);const _0x30cb23=_0x2b5007[_0x427478(0x211)][_0x427478(0x1ef)]||_0x2b5007[_0x427478(0x211)][_0x427478(0x1e9)],_0x4262b8=await fetchThumbnail(_0x30cb23);await sendMediaMessage(_0x3b5137,_0x20ed08,{'type':_0x2bd4af,'mediaUrl':_0x2b5007['result'][_0x427478(0x1d7)],'title':_0x2b5007['result'][_0x427478(0x206)],'thumbnail':_0x4262b8,'videoUrl':_0x168505[_0x427478(0x1d7)]});}catch(_0x48aae6){console['error']('Error\x20in\x20sendYtMusic:',_0x48aae6),await handleError(_0x3b5137,_0x510185,_0x20ed08);}}async function fetchMediaData(_0x464b79,_0xa1fe0f){const _0x273a1c=a31_0x5cd8d2,_0xbf21a9=new AbortController(),_0x2c3428=setTimeout(()=>_0xbf21a9[_0x273a1c(0x1da)](),0x186a0);try{console[_0x273a1c(0x213)]('Fetching\x20API:\x20'+_0x464b79);const _0x23b248=await a31_0x39d85c(_0x464b79,{'signal':_0xbf21a9[_0x273a1c(0x1dd)]});if(!_0x23b248['ok'])throw new Error(_0x273a1c(0x1d8)+_0x23b248[_0x273a1c(0x1f9)]);const _0x313e08=await _0x23b248[_0x273a1c(0x1e0)]();console[_0x273a1c(0x213)](_0x273a1c(0x1df),JSON[_0x273a1c(0x20c)](_0x313e08,null,0x2));if(_0xa1fe0f===_0x273a1c(0x1ec)){if(!(_0x313e08[_0x273a1c(0x1f9)]===0xc8&&_0x313e08[_0x273a1c(0x1f2)]&&_0x313e08[_0x273a1c(0x211)]?.[_0x273a1c(0x1d9)]))throw new Error(_0x273a1c(0x1dc));return{'creator':_0x313e08[_0x273a1c(0x212)],'status':_0x313e08['status'],'result':{'id':_0x313e08[_0x273a1c(0x211)]['id'],'title':_0x313e08['result'][_0x273a1c(0x206)],'image':_0x313e08['result'][_0x273a1c(0x1e9)],'url':_0x313e08['result'][_0x273a1c(0x1d9)]}};}else{if(!(_0x313e08[_0x273a1c(0x1f9)]===!![]&&_0x313e08[_0x273a1c(0x211)]?.[_0x273a1c(0x1d7)]))throw new Error(_0x273a1c(0x1db));return{'creator':_0x313e08['creator'],'status':_0x313e08['status'],'result':{'title':_0x313e08[_0x273a1c(0x211)][_0x273a1c(0x206)],'thumbnail':_0x313e08[_0x273a1c(0x211)][_0x273a1c(0x1ef)],'url':_0x313e08[_0x273a1c(0x211)]['url']}};}}catch(_0x32806b){return console[_0x273a1c(0x1f0)]('Error\x20in\x20fetchMediaData:',{'url':_0x464b79,'error':_0x32806b[_0x273a1c(0x1f8)],'stack':_0x32806b['stack']}),null;}finally{clearTimeout(_0x2c3428);}}async function sendMediaMessage(_0x591180,_0x350ce2,{type:_0x2677b4,mediaUrl:_0xaeb982,title:_0x291724,thumbnail:_0x1ab5c4,videoUrl:_0x38f5a0}){const _0x572402=a31_0x5cd8d2,_0x30dff1={[_0x2677b4]:{'url':_0xaeb982},'mimetype':_0x2677b4==='video'?_0x572402(0x20d):_0x572402(0x1f5),'caption':_0x291724,'contextInfo':{'externalAdReply':{'title':formatTitle(_0x291724,0x3c),'body':'TÃ©lÃ©chargÃ©\x20via\x20YouTube','thumbnail':_0x1ab5c4,'mediaType':_0x2677b4==='video'?0x2:0x1,'mediaUrl':_0x38f5a0,'sourceUrl':_0x38f5a0}}};_0x2677b4===_0x572402(0x1ec)&&(_0x30dff1[_0x572402(0x1f3)]=![]),await _0x591180['sendMessage'](_0x350ce2,_0x30dff1);}function a31_0x3c9f(_0x50c92a,_0x5bba22){const _0x539f96=a31_0x539f();return a31_0x3c9f=function(_0x3c9f80,_0x412ee8){_0x3c9f80=_0x3c9f80-0x1cf;let _0x366a62=_0x539f96[_0x3c9f80];return _0x366a62;},a31_0x3c9f(_0x50c92a,_0x5bba22);}function formatTitle(_0x43131c,_0x5de48e){const _0xd9ed98=a31_0x5cd8d2;return _0x43131c[_0xd9ed98(0x1e7)]>_0x5de48e?_0x43131c[_0xd9ed98(0x20b)](0x0,_0x5de48e-0x3)+'...':_0x43131c;}async function fetchThumbnail(_0x3c01df){const _0x424e73=a31_0x5cd8d2;try{const _0xbe63b3=await a31_0x39d85c(_0x3c01df);return Buffer[_0x424e73(0x1f4)](await _0xbe63b3[_0x424e73(0x1fa)]());}catch(_0x56a8fb){return console[_0x424e73(0x1f0)](_0x424e73(0x1d5),_0x56a8fb),null;}}async function handleError(_0x247b48,_0x4e5884,_0x4207b0){const _0x536a70=a31_0x5cd8d2;await send_text_message(_0x247b48,_0x4e5884,_0x536a70(0x209),_0x4207b0),await send_reaction_message(_0x247b48,_0x4e5884,_0x4207b0,'âŒ');}async function waitForUserChoice(_0x32a681,_0x538d77,_0x2fc6ee){return new Promise(_0x411cf0=>{const _0x82af20=async _0x5cfa36=>{const _0x408299=a31_0x3c9f;for(const _0x4c7800 of _0x5cfa36[_0x408299(0x1fb)]){if(_0x4c7800[_0x408299(0x20f)][_0x408299(0x1ea)]===_0x538d77){const _0x133ec7=getChoiceFromMessage(_0x4c7800);if(_0x133ec7===_0x408299(0x1d6)){_0x2f88c0(),_0x411cf0(null);return;}if(_0x133ec7>=0x0&&_0x133ec7<_0x2fc6ee[_0x408299(0x1e7)]){_0x2f88c0(),_0x411cf0(_0x2fc6ee[_0x133ec7]);return;}}}},_0x2f88c0=()=>{const _0x768304=a31_0x3c9f;_0x32a681['ev'][_0x768304(0x1eb)](_0x768304(0x202),_0x82af20),clearTimeout(_0x41523c);},_0x41523c=setTimeout(()=>{_0x2f88c0(),_0x411cf0(null);},DEFAULT_TIMEOUT);_0x32a681['ev']['on']('messages.upsert',_0x82af20);});}function getChoiceFromMessage(_0x432ad4){const _0x149cef=a31_0x5cd8d2;if(_0x432ad4[_0x149cef(0x1f8)]?.['buttonsResponseMessage']){const _0x5ee7a0=_0x432ad4[_0x149cef(0x1f8)]['buttonsResponseMessage'][_0x149cef(0x204)];if(_0x5ee7a0===_0x149cef(0x1d6))return _0x149cef(0x1d6);const _0x2f5e88=_0x5ee7a0['match'](/song_(\d+)/);return _0x2f5e88?parseInt(_0x2f5e88[0x1]):-0x1;}if(_0x432ad4['message']?.[_0x149cef(0x1e3)]){const _0x48e7c4=_0x432ad4[_0x149cef(0x1f8)]['conversation']['toLowerCase']();if(_0x48e7c4==='annuler'||_0x48e7c4===_0x149cef(0x1d6))return _0x149cef(0x1d6);const _0x15b854=parseInt(_0x48e7c4);return isNaN(_0x15b854)?-0x1:_0x15b854-0x1;}return-0x1;}